"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/ballon-or";
exports.ids = ["pages/api/ballon-or"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fballon-or&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fballon-or.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fballon-or&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fballon-or.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_ballon_or_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/ballon-or.ts */ \"(api)/./pages/api/ballon-or.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_ballon_or_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_ballon_or_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/ballon-or\",\n        pathname: \"/api/ballon-or\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_ballon_or_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmJhbGxvbi1vciZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGYmFsbG9uLW9yLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3FEO0FBQ3JEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxvREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsb0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9vdHJhdGUvPzM3ZWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9iYWxsb24tb3IudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9iYWxsb24tb3JcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9iYWxsb24tb3JcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fballon-or&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fballon-or.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFFO0FBRWxFLElBQUlJLElBQXlCLEVBQWNILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zvb3RyYXRlLy4vbGliL3ByaXNtYS50cz85ODIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxufVxuXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KClcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/ballon-or.ts":
/*!********************************!*\
  !*** ./pages/api/ballon-or.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n// pages/api/ballon-or.ts - Version compl√®te avec support F1 et exclusion coachs\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const { sport = \"all\", position = \"all\", minMatches = \"3\", limit = \"50\", period = \"all-time\", excludeF1 = \"false\" } = req.query;\n        console.log(`üèÜ Calcul Ballon d'Or/Driver - Sport: ${sport}, Min matchs: ${minMatches}`);\n        // 1. Construire les filtres\n        let sportFilter = {};\n        if (sport !== \"all\") {\n            sportFilter = {\n                sport: sport.toString().toUpperCase()\n            };\n        } else if (excludeF1 === \"true\") {\n            // üö´ Exclure F1 du Ballon d'Or classique UNIQUEMENT si excludeF1=true\n            sportFilter = {\n                sport: {\n                    not: \"F1\"\n                }\n            };\n        }\n        let positionFilter = {};\n        if (position !== \"all\") {\n            positionFilter = {\n                position: position.toString()\n            };\n        }\n        // 2. Filtre par p√©riode\n        let dateFilter = {};\n        const now = new Date();\n        switch(period){\n            case \"this-year\":\n                const yearAgo = new Date();\n                yearAgo.setFullYear(now.getFullYear() - 1);\n                dateFilter = {\n                    createdAt: {\n                        gte: yearAgo\n                    }\n                };\n                break;\n            case \"this-season\":\n                const seasonStart = new Date();\n                seasonStart.setMonth(8) // Septembre\n                ;\n                if (now.getMonth() < 8) {\n                    seasonStart.setFullYear(now.getFullYear() - 1);\n                }\n                dateFilter = {\n                    createdAt: {\n                        gte: seasonStart\n                    }\n                };\n                break;\n            case \"last-6-months\":\n                const sixMonthsAgo = new Date();\n                sixMonthsAgo.setMonth(now.getMonth() - 6);\n                dateFilter = {\n                    createdAt: {\n                        gte: sixMonthsAgo\n                    }\n                };\n                break;\n            default:\n                break;\n        }\n        // 3. üö´ EXCLURE EXPLICITEMENT LES COACHS - Inclure F1 si demand√© explicitement\n        let additionalFilters = {};\n        // Toujours exclure les coachs\n        additionalFilters.position = {\n            not: \"COACH\"\n        };\n        // Exclure F1 SEULEMENT si pas explicitement demand√© ET excludeF1=true\n        if (sport !== \"F1\" && excludeF1 === \"true\") {\n            additionalFilters.sport = {\n                not: \"F1\"\n            };\n        }\n        const playersWithRatings = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.player.findMany({\n            where: {\n                ...sportFilter,\n                ...additionalFilters,\n                ratings: {\n                    some: {\n                        ...dateFilter\n                    }\n                }\n            },\n            include: {\n                ratings: {\n                    where: dateFilter,\n                    include: {\n                        match: {\n                            select: {\n                                id: true,\n                                homeTeam: true,\n                                awayTeam: true,\n                                date: true,\n                                competition: true,\n                                sport: true\n                            }\n                        },\n                        user: {\n                            select: {\n                                id: true,\n                                name: true\n                            }\n                        }\n                    },\n                    orderBy: {\n                        createdAt: \"desc\"\n                    }\n                }\n            }\n        });\n        console.log(`üë• ${playersWithRatings.length} entit√©s r√©cup√©r√©es (SANS COACHS${sport === \"F1\" ? \" - PILOTES F1\" : excludeF1 === \"true\" ? \" & SANS F1\" : \"\"})`);\n        // 4. üß† FUSION INTELLIGENTE - VERSION AM√âLIOR√âE\n        const fusedPlayers = new Map();\n        for (const player of playersWithRatings){\n            if (player.ratings.length === 0) continue;\n            // Normaliser le nom pour la fusion (pilotes F1 ou joueurs)\n            const normalizedName = sport === \"F1\" ? normalizeDriverName(player.name) : normalizePlayerName(player.name);\n            // Si le joueur/pilote existe d√©j√† (m√™me nom normalis√©), fusionner\n            if (fusedPlayers.has(normalizedName)) {\n                const existingPlayer = fusedPlayers.get(normalizedName);\n                // Fusionner les donn√©es\n                existingPlayer.ratings.push(...player.ratings);\n                existingPlayer.teams.add(player.team);\n                if (player.position) {\n                    existingPlayer.positions.add(player.position);\n                }\n                console.log(`üîó Fusion r√©ussie: ${player.name} (${player.team}) avec ${existingPlayer.name}`);\n                console.log(`   -> Total ratings: ${existingPlayer.ratings.length}, √©quipes: ${Array.from(existingPlayer.teams).join(\", \")}`);\n            } else {\n                // Nouveau joueur/pilote\n                fusedPlayers.set(normalizedName, {\n                    originalId: player.id,\n                    name: sport === \"F1\" ? chooseBestDriverName(player.name, normalizedName) : chooseBestPlayerName(player.name, normalizedName),\n                    normalizedName,\n                    sport: player.sport,\n                    teams: new Set([\n                        player.team\n                    ]),\n                    positions: new Set(player.position ? [\n                        player.position\n                    ] : []),\n                    ratings: [\n                        ...player.ratings\n                    ]\n                });\n                console.log(`üÜï Nouvelle entit√©: ${player.name} (${player.team})`);\n            }\n        }\n        console.log(`üîó Apr√®s fusion intelligente: ${fusedPlayers.size} entit√©s uniques`);\n        // 5. Calculer les statistiques pour chaque entit√© fusionn√©e\n        const ballonOrCandidates = [];\n        for (const [normalizedName, fusedPlayer] of fusedPlayers.entries()){\n            const ratings = fusedPlayer.ratings;\n            if (ratings.length < parseInt(minMatches.toString())) {\n                continue;\n            }\n            // Filtre position apr√®s fusion\n            if (position !== \"all\" && !fusedPlayer.positions.has(position)) {\n                continue;\n            }\n            // Calculer la moyenne globale\n            const avgRating = ratings.reduce((sum, r)=>sum + r.rating, 0) / ratings.length;\n            // Trouver le meilleur match\n            const bestRating = ratings.reduce((best, current)=>current.rating > best.rating ? current : best);\n            // R√©cup√©rer les matchs uniques avec moyenne par match\n            const uniqueMatches = new Map();\n            ratings.forEach((rating)=>{\n                const matchId = rating.match.id;\n                if (!uniqueMatches.has(matchId)) {\n                    uniqueMatches.set(matchId, {\n                        match: rating.match,\n                        ratings: []\n                    });\n                }\n                uniqueMatches.get(matchId).ratings.push(rating);\n            });\n            const totalMatches = uniqueMatches.size;\n            // Calculer les 5 matchs les plus r√©cents\n            const recentMatches = Array.from(uniqueMatches.values()).sort((a, b)=>new Date(b.match.date).getTime() - new Date(a.match.date).getTime()).slice(0, 5).map((matchData)=>{\n                const matchAvgRating = matchData.ratings.reduce((sum, r)=>sum + r.rating, 0) / matchData.ratings.length;\n                const bestComment = matchData.ratings.find((r)=>r.comment)?.comment;\n                // D√©terminer l'√©quipe du joueur/pilote pour ce match\n                const playerTeam = getPlayerTeamForMatch(matchData.match, Array.from(fusedPlayer.teams));\n                return {\n                    matchId: matchData.match.id,\n                    rating: Number(matchAvgRating.toFixed(1)),\n                    comment: bestComment,\n                    homeTeam: matchData.match.homeTeam,\n                    awayTeam: matchData.match.awayTeam,\n                    date: matchData.match.date,\n                    competition: matchData.match.competition,\n                    team: playerTeam\n                };\n            });\n            // Calculer l'historique mensuel\n            const ratingHistory = calculateMonthlyHistory(ratings);\n            // Calculer la r√©partition par √©quipe\n            const teamBreakdown = calculateTeamBreakdown(ratings, Array.from(fusedPlayer.teams));\n            // D√©terminer l'√©quipe du meilleur match\n            const bestMatchTeam = getPlayerTeamForMatch(bestRating.match, Array.from(fusedPlayer.teams));\n            ballonOrCandidates.push({\n                id: `fused_${normalizedName}`,\n                name: fusedPlayer.name,\n                normalizedName,\n                positions: Array.from(fusedPlayer.positions),\n                teams: Array.from(fusedPlayer.teams),\n                sport: fusedPlayer.sport,\n                avgRating: Number(avgRating.toFixed(2)),\n                totalRatings: ratings.length,\n                totalMatches,\n                bestMatch: {\n                    id: bestRating.match.id,\n                    rating: bestRating.rating,\n                    homeTeam: bestRating.match.homeTeam,\n                    awayTeam: bestRating.match.awayTeam,\n                    date: bestRating.match.date,\n                    competition: bestRating.match.competition,\n                    team: bestMatchTeam\n                },\n                recentMatches,\n                ratingHistory,\n                teamBreakdown\n            });\n        }\n        // 6. Trier par moyenne des notes\n        ballonOrCandidates.sort((a, b)=>{\n            if (Math.abs(a.avgRating - b.avgRating) < 0.01) {\n                return b.totalMatches - a.totalMatches;\n            }\n            return b.avgRating - a.avgRating;\n        });\n        // 7. Limiter les r√©sultats\n        const topPlayers = ballonOrCandidates.slice(0, parseInt(limit.toString()));\n        // 8. Statistiques globales\n        const globalStats = {\n            totalPlayers: ballonOrCandidates.length,\n            totalRatings: ballonOrCandidates.reduce((sum, p)=>sum + p.totalRatings, 0),\n            totalMatches: ballonOrCandidates.reduce((sum, p)=>sum + p.totalMatches, 0),\n            avgRatingGlobal: ballonOrCandidates.length > 0 ? ballonOrCandidates.reduce((sum, p)=>sum + p.avgRating, 0) / ballonOrCandidates.length : 0,\n            topRating: topPlayers[0]?.avgRating || 0,\n            sportBreakdown: calculateSportBreakdown(ballonOrCandidates),\n            fusionStats: {\n                originalPlayers: playersWithRatings.length,\n                fusedPlayers: ballonOrCandidates.length,\n                fusionReduction: playersWithRatings.length - ballonOrCandidates.length\n            }\n        };\n        console.log(`üèÜ ${sport === \"F1\" ? \"Driver of the Fans\" : \"Ballon d'Or\"} calcul√©:`);\n        console.log(`   - ${playersWithRatings.length} entit√©s originales`);\n        console.log(`   - ${ballonOrCandidates.length} entit√©s apr√®s fusion intelligente`);\n        console.log(`   - Leader: ${topPlayers[0]?.name} (${topPlayers[0]?.avgRating}/10)`);\n        console.log(`   - √âquipes: ${topPlayers[0]?.teams.join(\", \")}`);\n        res.status(200).json({\n            success: true,\n            ballonOr: topPlayers,\n            stats: globalStats,\n            filters: {\n                sport,\n                position,\n                period,\n                minMatches: parseInt(minMatches.toString()),\n                playersOnly: true,\n                excludeCoaches: true,\n                excludeF1: sport !== \"F1\" && excludeF1 === \"true\",\n                isF1: sport === \"F1\" // üÜï Indicateur si c'est sp√©cifiquement F1\n            }\n        });\n    } catch (error) {\n        console.error(\"‚ùå Erreur Ballon d'Or/Driver:\", error);\n        res.status(500).json({\n            success: false,\n            error: \"Erreur serveur\",\n            details: error instanceof Error ? error.message : \"Erreur inconnue\"\n        });\n    }\n}\n// üß† Fonction de normalisation intelligente des noms - VERSION AM√âLIOR√âE\nfunction normalizePlayerName(name) {\n    let normalized = name.toLowerCase().trim()// Supprimer les accents\n    .normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\")// Supprimer les caract√®res sp√©ciaux sauf espaces et tirets\n    .replace(/[^a-z\\s-]/g, \"\")// Supprimer les doubles espaces\n    .replace(/\\s+/g, \" \")// Supprimer les espaces en d√©but/fin\n    .trim();\n    // üîç NORMALISATION SP√âCIALE POUR LES GRANDES STARS\n    const starMappings = {\n        // Lionel Messi\n        \"l messi\": \"lionel messi\",\n        \"l. messi\": \"lionel messi\",\n        \"leo messi\": \"lionel messi\",\n        \"lionel messi\": \"lionel messi\",\n        \"messi\": \"lionel messi\",\n        // Kylian Mbapp√©\n        \"k mbappe\": \"kylian mbappe\",\n        \"k. mbappe\": \"kylian mbappe\",\n        \"kylian mbappe\": \"kylian mbappe\",\n        \"mbappe\": \"kylian mbappe\",\n        // Cristiano Ronaldo\n        \"c ronaldo\": \"cristiano ronaldo\",\n        \"c. ronaldo\": \"cristiano ronaldo\",\n        \"cristiano ronaldo\": \"cristiano ronaldo\",\n        \"ronaldo\": \"cristiano ronaldo\",\n        \"cr7\": \"cristiano ronaldo\",\n        // Rayan Cherki\n        \"r cherki\": \"rayan cherki\",\n        \"r. cherki\": \"rayan cherki\",\n        \"rayan cherki\": \"rayan cherki\",\n        \"cherki\": \"rayan cherki\",\n        // Antoine Griezmann\n        \"a griezmann\": \"antoine griezmann\",\n        \"a. griezmann\": \"antoine griezmann\",\n        \"antoine griezmann\": \"antoine griezmann\",\n        \"griezmann\": \"antoine griezmann\",\n        // Neymar\n        \"neymar jr\": \"neymar\",\n        \"neymar junior\": \"neymar\",\n        \"neymar\": \"neymar\",\n        // Erling Haaland\n        \"e haaland\": \"erling haaland\",\n        \"e. haaland\": \"erling haaland\",\n        \"erling haaland\": \"erling haaland\",\n        \"haaland\": \"erling haaland\",\n        // Vinicius Jr\n        \"vinicius jr\": \"vinicius junior\",\n        \"vinicius junior\": \"vinicius junior\",\n        \"vini jr\": \"vinicius junior\",\n        \"vinicius\": \"vinicius junior\",\n        // LeBron James (basketball)\n        \"l james\": \"lebron james\",\n        \"l. james\": \"lebron james\",\n        \"lebron james\": \"lebron james\",\n        \"james\": \"lebron james\",\n        // Stephen Curry\n        \"s curry\": \"stephen curry\",\n        \"s. curry\": \"stephen curry\",\n        \"stephen curry\": \"stephen curry\",\n        \"steph curry\": \"stephen curry\",\n        \"curry\": \"stephen curry\"\n    };\n    // V√©rifier si on a une correspondance dans les mappings\n    if (starMappings[normalized]) {\n        normalized = starMappings[normalized];\n        console.log(`‚≠ê Star d√©tect√©e: \"${name}\" -> \"${normalized}\"`);\n        return normalized;\n    }\n    // üîç NORMALISATION G√âN√âRIQUE POUR LES INITIALES\n    // Pattern: \"Initiale. Nom\" -> \"prenom nom\"\n    const initialPattern = /^([a-z])\\.\\s*([a-z]+)$/;\n    const match = normalized.match(initialPattern);\n    if (match) {\n        const initial = match[1];\n        const lastName = match[2];\n        // Essayer de deviner le pr√©nom complet pour certains noms\n        const commonNames = {\n            \"m\": {\n                \"mbappe\": \"kylian\",\n                \"salah\": \"mohamed\"\n            },\n            \"l\": {\n                \"messi\": \"lionel\",\n                \"suarez\": \"luis\",\n                \"modric\": \"luka\"\n            },\n            \"c\": {\n                \"ronaldo\": \"cristiano\",\n                \"mbappe\": \"kylian\" // Au cas o√π\n            },\n            \"r\": {\n                \"cherki\": \"rayan\",\n                \"mahrez\": \"riyad\"\n            },\n            \"a\": {\n                \"griezmann\": \"antoine\",\n                \"mbappe\": \"kylian\" // Parfois mal √©crit\n            }\n        };\n        if (commonNames[initial] && commonNames[initial][lastName]) {\n            const fullName = `${commonNames[initial][lastName]} ${lastName}`;\n            console.log(`üîç Expansion initiale: \"${name}\" -> \"${fullName}\"`);\n            return fullName;\n        }\n    }\n    console.log(`üîç Normalisation standard: \"${name}\" -> \"${normalized}\"`);\n    return normalized;\n}\n// üèéÔ∏è Fonction de normalisation sp√©ciale pour les pilotes F1\nfunction normalizeDriverName(name) {\n    let normalized = name.toLowerCase().trim().normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").replace(/[^a-z\\s-]/g, \"\").replace(/\\s+/g, \" \").trim();\n    // üîç NORMALISATION SP√âCIALE POUR LES PILOTES F1\n    const driverMappings = {\n        // Max Verstappen\n        \"m verstappen\": \"max verstappen\",\n        \"m. verstappen\": \"max verstappen\",\n        \"max verstappen\": \"max verstappen\",\n        \"verstappen\": \"max verstappen\",\n        // Lewis Hamilton\n        \"l hamilton\": \"lewis hamilton\",\n        \"l. hamilton\": \"lewis hamilton\",\n        \"lewis hamilton\": \"lewis hamilton\",\n        \"hamilton\": \"lewis hamilton\",\n        // Charles Leclerc\n        \"c leclerc\": \"charles leclerc\",\n        \"c. leclerc\": \"charles leclerc\",\n        \"charles leclerc\": \"charles leclerc\",\n        \"leclerc\": \"charles leclerc\",\n        // Lando Norris\n        \"l norris\": \"lando norris\",\n        \"l. norris\": \"lando norris\",\n        \"lando norris\": \"lando norris\",\n        \"norris\": \"lando norris\",\n        // George Russell\n        \"g russell\": \"george russell\",\n        \"g. russell\": \"george russell\",\n        \"george russell\": \"george russell\",\n        \"russell\": \"george russell\",\n        // Carlos Sainz\n        \"c sainz\": \"carlos sainz\",\n        \"c. sainz\": \"carlos sainz\",\n        \"carlos sainz\": \"carlos sainz\",\n        \"sainz\": \"carlos sainz\",\n        // Fernando Alonso\n        \"f alonso\": \"fernando alonso\",\n        \"f. alonso\": \"fernando alonso\",\n        \"fernando alonso\": \"fernando alonso\",\n        \"alonso\": \"fernando alonso\",\n        // Sergio Perez\n        \"s perez\": \"sergio perez\",\n        \"s. perez\": \"sergio perez\",\n        \"sergio perez\": \"sergio perez\",\n        \"checo perez\": \"sergio perez\",\n        \"perez\": \"sergio perez\"\n    };\n    // V√©rifier si on a une correspondance dans les mappings\n    if (driverMappings[normalized]) {\n        normalized = driverMappings[normalized];\n        console.log(`üèéÔ∏è Pilote d√©tect√©: \"${name}\" -> \"${normalized}\"`);\n        return normalized;\n    }\n    console.log(`üîç Normalisation pilote standard: \"${name}\" -> \"${normalized}\"`);\n    return normalized;\n}\n// üéØ Fonction pour choisir le meilleur nom d'affichage\nfunction chooseBestPlayerName(originalName, normalizedName) {\n    // Pr√©f√©rer les noms complets aux initiales\n    const hasInitial = originalName.includes(\".\");\n    // Pour les stars connues, utiliser le nom complet canonique\n    const canonicalNames = {\n        \"lionel messi\": \"Lionel Messi\",\n        \"cristiano ronaldo\": \"Cristiano Ronaldo\",\n        \"kylian mbappe\": \"Kylian Mbapp\\xe9\",\n        \"neymar\": \"Neymar Jr\",\n        \"erling haaland\": \"Erling Haaland\",\n        \"vinicius junior\": \"Vinicius Jr\",\n        \"rayan cherki\": \"Rayan Cherki\",\n        \"antoine griezmann\": \"Antoine Griezmann\",\n        \"lebron james\": \"LeBron James\",\n        \"stephen curry\": \"Stephen Curry\"\n    };\n    // Si on a un nom canonique, l'utiliser\n    if (canonicalNames[normalizedName]) {\n        console.log(`‚≠ê Nom canonique choisi: ${canonicalNames[normalizedName]}`);\n        return canonicalNames[normalizedName];\n    }\n    // Sinon, pr√©f√©rer le nom sans initiale\n    if (hasInitial) {\n        // Essayer de construire un nom complet\n        const parts = originalName.split(\" \");\n        if (parts.length >= 2 && parts[0].includes(\".\")) {\n            // Format \"A. Nom\" -> garder tel quel si pas de correspondance\n            return originalName;\n        }\n    }\n    // Capitaliser proprement le nom original\n    return originalName.split(\" \").map((word)=>word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(\" \");\n}\n// üèéÔ∏è Fonction pour choisir le meilleur nom d'affichage pour les pilotes\nfunction chooseBestDriverName(originalName, normalizedName) {\n    // Noms canoniques pour les pilotes F1\n    const canonicalDriverNames = {\n        \"max verstappen\": \"Max Verstappen\",\n        \"lewis hamilton\": \"Lewis Hamilton\",\n        \"charles leclerc\": \"Charles Leclerc\",\n        \"lando norris\": \"Lando Norris\",\n        \"george russell\": \"George Russell\",\n        \"carlos sainz\": \"Carlos Sainz\",\n        \"fernando alonso\": \"Fernando Alonso\",\n        \"sergio perez\": \"Sergio P\\xe9rez\"\n    };\n    // Si on a un nom canonique, l'utiliser\n    if (canonicalDriverNames[normalizedName]) {\n        console.log(`üèéÔ∏è Nom canonique pilote choisi: ${canonicalDriverNames[normalizedName]}`);\n        return canonicalDriverNames[normalizedName];\n    }\n    // Sinon, capitaliser proprement le nom original\n    return originalName.split(\" \").map((word)=>word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(\" \");\n}\n// Fonction pour d√©terminer l'√©quipe du joueur/pilote dans un match\nfunction getPlayerTeamForMatch(match, playerTeams) {\n    // Essayer de faire correspondre avec les √©quipes du match\n    const homeTeam = match.homeTeam.toLowerCase();\n    const awayTeam = match.awayTeam.toLowerCase();\n    for (const team of playerTeams){\n        const teamLower = team.toLowerCase();\n        // Correspondance exacte ou partielle\n        if (homeTeam.includes(teamLower) || teamLower.includes(homeTeam.split(\" \")[0])) {\n            return match.homeTeam;\n        }\n        if (awayTeam.includes(teamLower) || teamLower.includes(awayTeam.split(\" \")[0])) {\n            return match.awayTeam;\n        }\n        // Pour les √©quipes nationales\n        if (team.includes(\"France\") && (homeTeam.includes(\"france\") || awayTeam.includes(\"france\"))) {\n            return homeTeam.includes(\"france\") ? match.homeTeam : match.awayTeam;\n        }\n    }\n    // Si aucune correspondance, retourner la premi√®re √©quipe connue\n    return playerTeams[0] || \"\\xc9quipe inconnue\";\n}\n// Calculer la r√©partition par √©quipe\nfunction calculateTeamBreakdown(ratings, teams) {\n    const teamStats = new Map();\n    // Initialiser les stats pour chaque √©quipe\n    teams.forEach((team)=>{\n        teamStats.set(team, {\n            team,\n            ratings: [],\n            matches: new Set()\n        });\n    });\n    // R√©partir les ratings par √©quipe (bas√© sur le match)\n    ratings.forEach((rating)=>{\n        const playerTeam = getPlayerTeamForMatch(rating.match, teams);\n        const normalizedTeam = teams.find((t)=>t.toLowerCase().includes(playerTeam.toLowerCase()) || playerTeam.toLowerCase().includes(t.toLowerCase())) || teams[0];\n        if (teamStats.has(normalizedTeam)) {\n            teamStats.get(normalizedTeam).ratings.push(rating.rating);\n            teamStats.get(normalizedTeam).matches.add(rating.match.id);\n        }\n    });\n    // Calculer les moyennes\n    return Array.from(teamStats.values()).filter((stats)=>stats.ratings.length > 0).map((stats)=>({\n            team: stats.team,\n            avgRating: Number((stats.ratings.reduce((sum, r)=>sum + r, 0) / stats.ratings.length).toFixed(2)),\n            matchCount: stats.matches.size,\n            ratingCount: stats.ratings.length\n        })).sort((a, b)=>b.avgRating - a.avgRating);\n}\n// Fonctions utilitaires existantes (inchang√©es)\nfunction calculateMonthlyHistory(ratings) {\n    const monthlyData = new Map();\n    ratings.forEach((rating)=>{\n        const date = new Date(rating.createdAt);\n        const monthKey = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, \"0\")}`;\n        if (!monthlyData.has(monthKey)) {\n            monthlyData.set(monthKey, {\n                ratings: [],\n                matches: new Set()\n            });\n        }\n        monthlyData.get(monthKey).ratings.push(rating.rating);\n        monthlyData.get(monthKey).matches.add(rating.match.id);\n    });\n    return Array.from(monthlyData.entries()).map(([month, data])=>({\n            month,\n            avgRating: Number((data.ratings.reduce((sum, r)=>sum + r, 0) / data.ratings.length).toFixed(2)),\n            matchCount: data.matches.size\n        })).sort((a, b)=>a.month.localeCompare(b.month)).slice(-12);\n}\nfunction calculateSportBreakdown(players) {\n    const breakdown = new Map();\n    players.forEach((player)=>{\n        if (!breakdown.has(player.sport)) {\n            breakdown.set(player.sport, {\n                count: 0,\n                totalRatings: 0\n            });\n        }\n        const data = breakdown.get(player.sport);\n        data.count++;\n        data.totalRatings += player.totalRatings;\n    });\n    return Array.from(breakdown.entries()).map(([sport, data])=>({\n            sport,\n            playerCount: data.count,\n            avgRating: players.filter((p)=>p.sport === sport).reduce((sum, p)=>sum + p.avgRating, 0) / data.count,\n            totalRatings: data.totalRatings\n        }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS0ksS0FBSztRQUNWSixLQUFLM0QsWUFBWSxJQUFJN0UsT0FBTzZFLFlBQVk7SUFDMUM7SUFFQSxPQUFPL0MsTUFBTUMsSUFBSSxDQUFDNEcsVUFBVWxHLE9BQU8sSUFBSXFCLEdBQUcsQ0FBQyxDQUFDLENBQUMxRixPQUFPb0ssS0FBSyxHQUFNO1lBQzdEcEs7WUFDQXlLLGFBQWFMLEtBQUtJLEtBQUs7WUFDdkJqRyxXQUFXK0YsUUFDUlQsTUFBTSxDQUFDN0MsQ0FBQUEsSUFBS0EsRUFBRWhILEtBQUssS0FBS0EsT0FDeEJ3RSxNQUFNLENBQUMsQ0FBQ0MsS0FBS3VDLElBQU12QyxNQUFNdUMsRUFBRXpDLFNBQVMsRUFBRSxLQUFLNkYsS0FBS0ksS0FBSztZQUN4RC9ELGNBQWMyRCxLQUFLM0QsWUFBWTtRQUNqQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9vdHJhdGUvLi9wYWdlcy9hcGkvYmFsbG9uLW9yLnRzP2ZlNzIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL2JhbGxvbi1vci50cyAtIFZlcnNpb24gY29tcGzDqHRlIGF2ZWMgc3VwcG9ydCBGMSBldCBleGNsdXNpb24gY29hY2hzXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCdcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4uLy4uL2xpYi9wcmlzbWEnXG5cbmludGVyZmFjZSBCYWxsb25PclBsYXllciB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIG5vcm1hbGl6ZWROYW1lOiBzdHJpbmdcbiAgcG9zaXRpb25zOiBzdHJpbmdbXVxuICB0ZWFtczogc3RyaW5nW11cbiAgc3BvcnQ6IHN0cmluZ1xuICBhdmdSYXRpbmc6IG51bWJlclxuICB0b3RhbFJhdGluZ3M6IG51bWJlclxuICB0b3RhbE1hdGNoZXM6IG51bWJlclxuICBiZXN0TWF0Y2g6IHtcbiAgICBpZDogc3RyaW5nXG4gICAgcmF0aW5nOiBudW1iZXJcbiAgICBob21lVGVhbTogc3RyaW5nXG4gICAgYXdheVRlYW06IHN0cmluZ1xuICAgIGRhdGU6IHN0cmluZ1xuICAgIGNvbXBldGl0aW9uOiBzdHJpbmdcbiAgICB0ZWFtOiBzdHJpbmdcbiAgfVxuICByZWNlbnRNYXRjaGVzOiBBcnJheTx7XG4gICAgbWF0Y2hJZDogc3RyaW5nXG4gICAgcmF0aW5nOiBudW1iZXJcbiAgICBjb21tZW50Pzogc3RyaW5nXG4gICAgaG9tZVRlYW06IHN0cmluZ1xuICAgIGF3YXlUZWFtOiBzdHJpbmdcbiAgICBkYXRlOiBzdHJpbmdcbiAgICBjb21wZXRpdGlvbjogc3RyaW5nXG4gICAgdGVhbTogc3RyaW5nXG4gIH0+XG4gIHJhdGluZ0hpc3Rvcnk6IEFycmF5PHtcbiAgICBtb250aDogc3RyaW5nXG4gICAgYXZnUmF0aW5nOiBudW1iZXJcbiAgICBtYXRjaENvdW50OiBudW1iZXJcbiAgfT5cbiAgdGVhbUJyZWFrZG93bjogQXJyYXk8e1xuICAgIHRlYW06IHN0cmluZ1xuICAgIGF2Z1JhdGluZzogbnVtYmVyXG4gICAgbWF0Y2hDb3VudDogbnVtYmVyXG4gICAgcmF0aW5nQ291bnQ6IG51bWJlclxuICB9PlxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7XG4gICAgICBzcG9ydCA9ICdhbGwnLFxuICAgICAgcG9zaXRpb24gPSAnYWxsJywgXG4gICAgICBtaW5NYXRjaGVzID0gJzMnLFxuICAgICAgbGltaXQgPSAnNTAnLFxuICAgICAgcGVyaW9kID0gJ2FsbC10aW1lJyxcbiAgICAgIGV4Y2x1ZGVGMSA9ICdmYWxzZSdcbiAgICB9ID0gcmVxLnF1ZXJ5XG5cbiAgICBjb25zb2xlLmxvZyhg8J+PhiBDYWxjdWwgQmFsbG9uIGQnT3IvRHJpdmVyIC0gU3BvcnQ6ICR7c3BvcnR9LCBNaW4gbWF0Y2hzOiAke21pbk1hdGNoZXN9YClcblxuICAgIC8vIDEuIENvbnN0cnVpcmUgbGVzIGZpbHRyZXNcbiAgICBsZXQgc3BvcnRGaWx0ZXIgPSB7fVxuICAgIGlmIChzcG9ydCAhPT0gJ2FsbCcpIHtcbiAgICAgIHNwb3J0RmlsdGVyID0geyBzcG9ydDogc3BvcnQudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIH1cbiAgICB9IGVsc2UgaWYgKGV4Y2x1ZGVGMSA9PT0gJ3RydWUnKSB7XG4gICAgICAvLyDwn5qrIEV4Y2x1cmUgRjEgZHUgQmFsbG9uIGQnT3IgY2xhc3NpcXVlIFVOSVFVRU1FTlQgc2kgZXhjbHVkZUYxPXRydWVcbiAgICAgIHNwb3J0RmlsdGVyID0geyBcbiAgICAgICAgc3BvcnQ6IHsgXG4gICAgICAgICAgbm90OiAnRjEnIFxuICAgICAgICB9IFxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBwb3NpdGlvbkZpbHRlciA9IHt9XG4gICAgaWYgKHBvc2l0aW9uICE9PSAnYWxsJykge1xuICAgICAgcG9zaXRpb25GaWx0ZXIgPSB7IHBvc2l0aW9uOiBwb3NpdGlvbi50b1N0cmluZygpIH1cbiAgICB9XG5cbiAgICAvLyAyLiBGaWx0cmUgcGFyIHDDqXJpb2RlXG4gICAgbGV0IGRhdGVGaWx0ZXIgPSB7fVxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICBcbiAgICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgICAgY2FzZSAndGhpcy15ZWFyJzpcbiAgICAgICAgY29uc3QgeWVhckFnbyA9IG5ldyBEYXRlKClcbiAgICAgICAgeWVhckFnby5zZXRGdWxsWWVhcihub3cuZ2V0RnVsbFllYXIoKSAtIDEpXG4gICAgICAgIGRhdGVGaWx0ZXIgPSB7IGNyZWF0ZWRBdDogeyBndGU6IHllYXJBZ28gfSB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICd0aGlzLXNlYXNvbic6XG4gICAgICAgIGNvbnN0IHNlYXNvblN0YXJ0ID0gbmV3IERhdGUoKVxuICAgICAgICBzZWFzb25TdGFydC5zZXRNb250aCg4KSAvLyBTZXB0ZW1icmVcbiAgICAgICAgaWYgKG5vdy5nZXRNb250aCgpIDwgOCkge1xuICAgICAgICAgIHNlYXNvblN0YXJ0LnNldEZ1bGxZZWFyKG5vdy5nZXRGdWxsWWVhcigpIC0gMSlcbiAgICAgICAgfVxuICAgICAgICBkYXRlRmlsdGVyID0geyBjcmVhdGVkQXQ6IHsgZ3RlOiBzZWFzb25TdGFydCB9IH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2xhc3QtNi1tb250aHMnOlxuICAgICAgICBjb25zdCBzaXhNb250aHNBZ28gPSBuZXcgRGF0ZSgpXG4gICAgICAgIHNpeE1vbnRoc0Fnby5zZXRNb250aChub3cuZ2V0TW9udGgoKSAtIDYpXG4gICAgICAgIGRhdGVGaWx0ZXIgPSB7IGNyZWF0ZWRBdDogeyBndGU6IHNpeE1vbnRoc0FnbyB9IH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6IC8vICdhbGwtdGltZSdcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICAvLyAzLiDwn5qrIEVYQ0xVUkUgRVhQTElDSVRFTUVOVCBMRVMgQ09BQ0hTIC0gSW5jbHVyZSBGMSBzaSBkZW1hbmTDqSBleHBsaWNpdGVtZW50XG4gICAgbGV0IGFkZGl0aW9uYWxGaWx0ZXJzID0ge31cbiAgICBcbiAgICAvLyBUb3Vqb3VycyBleGNsdXJlIGxlcyBjb2FjaHNcbiAgICBhZGRpdGlvbmFsRmlsdGVycy5wb3NpdGlvbiA9IHsgbm90OiAnQ09BQ0gnIH1cbiAgICBcbiAgICAvLyBFeGNsdXJlIEYxIFNFVUxFTUVOVCBzaSBwYXMgZXhwbGljaXRlbWVudCBkZW1hbmTDqSBFVCBleGNsdWRlRjE9dHJ1ZVxuICAgIGlmIChzcG9ydCAhPT0gJ0YxJyAmJiBleGNsdWRlRjEgPT09ICd0cnVlJykge1xuICAgICAgYWRkaXRpb25hbEZpbHRlcnMuc3BvcnQgPSB7IG5vdDogJ0YxJyB9XG4gICAgfVxuXG4gICAgY29uc3QgcGxheWVyc1dpdGhSYXRpbmdzID0gYXdhaXQgcHJpc21hLnBsYXllci5maW5kTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICAuLi5zcG9ydEZpbHRlcixcbiAgICAgICAgLi4uYWRkaXRpb25hbEZpbHRlcnMsXG4gICAgICAgIHJhdGluZ3M6IHtcbiAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICAuLi5kYXRlRmlsdGVyXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICByYXRpbmdzOiB7XG4gICAgICAgICAgd2hlcmU6IGRhdGVGaWx0ZXIsXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaG9tZVRlYW06IHRydWUsXG4gICAgICAgICAgICAgICAgYXdheVRlYW06IHRydWUsXG4gICAgICAgICAgICAgICAgZGF0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb21wZXRpdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzcG9ydDogdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnNvbGUubG9nKGDwn5GlICR7cGxheWVyc1dpdGhSYXRpbmdzLmxlbmd0aH0gZW50aXTDqXMgcsOpY3Vww6lyw6llcyAoU0FOUyBDT0FDSFMke3Nwb3J0ID09PSAnRjEnID8gJyAtIFBJTE9URVMgRjEnIDogZXhjbHVkZUYxID09PSAndHJ1ZScgPyAnICYgU0FOUyBGMScgOiAnJ30pYClcblxuICAgIC8vIDQuIPCfp6AgRlVTSU9OIElOVEVMTElHRU5URSAtIFZFUlNJT04gQU3DiUxJT1LDiUVcbiAgICBjb25zdCBmdXNlZFBsYXllcnMgPSBuZXcgTWFwPHN0cmluZywgYW55PigpXG5cbiAgICBmb3IgKGNvbnN0IHBsYXllciBvZiBwbGF5ZXJzV2l0aFJhdGluZ3MpIHtcbiAgICAgIGlmIChwbGF5ZXIucmF0aW5ncy5sZW5ndGggPT09IDApIGNvbnRpbnVlXG5cbiAgICAgIC8vIE5vcm1hbGlzZXIgbGUgbm9tIHBvdXIgbGEgZnVzaW9uIChwaWxvdGVzIEYxIG91IGpvdWV1cnMpXG4gICAgICBjb25zdCBub3JtYWxpemVkTmFtZSA9IHNwb3J0ID09PSAnRjEnID8gbm9ybWFsaXplRHJpdmVyTmFtZShwbGF5ZXIubmFtZSkgOiBub3JtYWxpemVQbGF5ZXJOYW1lKHBsYXllci5uYW1lKVxuICAgICAgXG4gICAgICAvLyBTaSBsZSBqb3VldXIvcGlsb3RlIGV4aXN0ZSBkw6lqw6AgKG3Dqm1lIG5vbSBub3JtYWxpc8OpKSwgZnVzaW9ubmVyXG4gICAgICBpZiAoZnVzZWRQbGF5ZXJzLmhhcyhub3JtYWxpemVkTmFtZSkpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQbGF5ZXIgPSBmdXNlZFBsYXllcnMuZ2V0KG5vcm1hbGl6ZWROYW1lKVxuICAgICAgICBcbiAgICAgICAgLy8gRnVzaW9ubmVyIGxlcyBkb25uw6llc1xuICAgICAgICBleGlzdGluZ1BsYXllci5yYXRpbmdzLnB1c2goLi4ucGxheWVyLnJhdGluZ3MpXG4gICAgICAgIGV4aXN0aW5nUGxheWVyLnRlYW1zLmFkZChwbGF5ZXIudGVhbSlcbiAgICAgICAgaWYgKHBsYXllci5wb3NpdGlvbikge1xuICAgICAgICAgIGV4aXN0aW5nUGxheWVyLnBvc2l0aW9ucy5hZGQocGxheWVyLnBvc2l0aW9uKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhg8J+UlyBGdXNpb24gcsOpdXNzaWU6ICR7cGxheWVyLm5hbWV9ICgke3BsYXllci50ZWFtfSkgYXZlYyAke2V4aXN0aW5nUGxheWVyLm5hbWV9YClcbiAgICAgICAgY29uc29sZS5sb2coYCAgIC0+IFRvdGFsIHJhdGluZ3M6ICR7ZXhpc3RpbmdQbGF5ZXIucmF0aW5ncy5sZW5ndGh9LCDDqXF1aXBlczogJHtBcnJheS5mcm9tKGV4aXN0aW5nUGxheWVyLnRlYW1zKS5qb2luKCcsICcpfWApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3V2ZWF1IGpvdWV1ci9waWxvdGVcbiAgICAgICAgZnVzZWRQbGF5ZXJzLnNldChub3JtYWxpemVkTmFtZSwge1xuICAgICAgICAgIG9yaWdpbmFsSWQ6IHBsYXllci5pZCxcbiAgICAgICAgICBuYW1lOiBzcG9ydCA9PT0gJ0YxJyA/IGNob29zZUJlc3REcml2ZXJOYW1lKHBsYXllci5uYW1lLCBub3JtYWxpemVkTmFtZSkgOiBjaG9vc2VCZXN0UGxheWVyTmFtZShwbGF5ZXIubmFtZSwgbm9ybWFsaXplZE5hbWUpLFxuICAgICAgICAgIG5vcm1hbGl6ZWROYW1lLFxuICAgICAgICAgIHNwb3J0OiBwbGF5ZXIuc3BvcnQsXG4gICAgICAgICAgdGVhbXM6IG5ldyBTZXQoW3BsYXllci50ZWFtXSksXG4gICAgICAgICAgcG9zaXRpb25zOiBuZXcgU2V0KHBsYXllci5wb3NpdGlvbiA/IFtwbGF5ZXIucG9zaXRpb25dIDogW10pLFxuICAgICAgICAgIHJhdGluZ3M6IFsuLi5wbGF5ZXIucmF0aW5nc11cbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn4aVIE5vdXZlbGxlIGVudGl0w6k6ICR7cGxheWVyLm5hbWV9ICgke3BsYXllci50ZWFtfSlgKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn5SXIEFwcsOocyBmdXNpb24gaW50ZWxsaWdlbnRlOiAke2Z1c2VkUGxheWVycy5zaXplfSBlbnRpdMOpcyB1bmlxdWVzYClcblxuICAgIC8vIDUuIENhbGN1bGVyIGxlcyBzdGF0aXN0aXF1ZXMgcG91ciBjaGFxdWUgZW50aXTDqSBmdXNpb25uw6llXG4gICAgY29uc3QgYmFsbG9uT3JDYW5kaWRhdGVzOiBCYWxsb25PclBsYXllcltdID0gW11cblxuICAgIGZvciAoY29uc3QgW25vcm1hbGl6ZWROYW1lLCBmdXNlZFBsYXllcl0gb2YgZnVzZWRQbGF5ZXJzLmVudHJpZXMoKSkge1xuICAgICAgY29uc3QgcmF0aW5ncyA9IGZ1c2VkUGxheWVyLnJhdGluZ3NcbiAgICAgIFxuICAgICAgaWYgKHJhdGluZ3MubGVuZ3RoIDwgcGFyc2VJbnQobWluTWF0Y2hlcy50b1N0cmluZygpKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyBGaWx0cmUgcG9zaXRpb24gYXByw6hzIGZ1c2lvblxuICAgICAgaWYgKHBvc2l0aW9uICE9PSAnYWxsJyAmJiAhZnVzZWRQbGF5ZXIucG9zaXRpb25zLmhhcyhwb3NpdGlvbikpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gQ2FsY3VsZXIgbGEgbW95ZW5uZSBnbG9iYWxlXG4gICAgICBjb25zdCBhdmdSYXRpbmcgPSByYXRpbmdzLnJlZHVjZSgoc3VtOiBudW1iZXIsIHI6IGFueSkgPT4gc3VtICsgci5yYXRpbmcsIDApIC8gcmF0aW5ncy5sZW5ndGhcbiAgICAgIFxuICAgICAgLy8gVHJvdXZlciBsZSBtZWlsbGV1ciBtYXRjaFxuICAgICAgY29uc3QgYmVzdFJhdGluZyA9IHJhdGluZ3MucmVkdWNlKChiZXN0OiBhbnksIGN1cnJlbnQ6IGFueSkgPT4gXG4gICAgICAgIGN1cnJlbnQucmF0aW5nID4gYmVzdC5yYXRpbmcgPyBjdXJyZW50IDogYmVzdFxuICAgICAgKVxuXG4gICAgICAvLyBSw6ljdXDDqXJlciBsZXMgbWF0Y2hzIHVuaXF1ZXMgYXZlYyBtb3llbm5lIHBhciBtYXRjaFxuICAgICAgY29uc3QgdW5pcXVlTWF0Y2hlcyA9IG5ldyBNYXAoKVxuICAgICAgcmF0aW5ncy5mb3JFYWNoKChyYXRpbmc6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaElkID0gcmF0aW5nLm1hdGNoLmlkXG4gICAgICAgIGlmICghdW5pcXVlTWF0Y2hlcy5oYXMobWF0Y2hJZCkpIHtcbiAgICAgICAgICB1bmlxdWVNYXRjaGVzLnNldChtYXRjaElkLCB7XG4gICAgICAgICAgICBtYXRjaDogcmF0aW5nLm1hdGNoLFxuICAgICAgICAgICAgcmF0aW5nczogW11cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHVuaXF1ZU1hdGNoZXMuZ2V0KG1hdGNoSWQpLnJhdGluZ3MucHVzaChyYXRpbmcpXG4gICAgICB9KVxuXG4gICAgICBjb25zdCB0b3RhbE1hdGNoZXMgPSB1bmlxdWVNYXRjaGVzLnNpemVcblxuICAgICAgLy8gQ2FsY3VsZXIgbGVzIDUgbWF0Y2hzIGxlcyBwbHVzIHLDqWNlbnRzXG4gICAgICBjb25zdCByZWNlbnRNYXRjaGVzID0gQXJyYXkuZnJvbSh1bmlxdWVNYXRjaGVzLnZhbHVlcygpKVxuICAgICAgICAuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IG5ldyBEYXRlKGIubWF0Y2guZGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5tYXRjaC5kYXRlKS5nZXRUaW1lKCkpXG4gICAgICAgIC5zbGljZSgwLCA1KVxuICAgICAgICAubWFwKChtYXRjaERhdGE6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IG1hdGNoQXZnUmF0aW5nID0gbWF0Y2hEYXRhLnJhdGluZ3MucmVkdWNlKChzdW06IG51bWJlciwgcjogYW55KSA9PiBzdW0gKyByLnJhdGluZywgMCkgLyBtYXRjaERhdGEucmF0aW5ncy5sZW5ndGhcbiAgICAgICAgICBjb25zdCBiZXN0Q29tbWVudCA9IG1hdGNoRGF0YS5yYXRpbmdzLmZpbmQoKHI6IGFueSkgPT4gci5jb21tZW50KT8uY29tbWVudFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIETDqXRlcm1pbmVyIGwnw6lxdWlwZSBkdSBqb3VldXIvcGlsb3RlIHBvdXIgY2UgbWF0Y2hcbiAgICAgICAgICBjb25zdCBwbGF5ZXJUZWFtID0gZ2V0UGxheWVyVGVhbUZvck1hdGNoKG1hdGNoRGF0YS5tYXRjaCwgQXJyYXkuZnJvbShmdXNlZFBsYXllci50ZWFtcykpXG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1hdGNoSWQ6IG1hdGNoRGF0YS5tYXRjaC5pZCxcbiAgICAgICAgICAgIHJhdGluZzogTnVtYmVyKG1hdGNoQXZnUmF0aW5nLnRvRml4ZWQoMSkpLFxuICAgICAgICAgICAgY29tbWVudDogYmVzdENvbW1lbnQsXG4gICAgICAgICAgICBob21lVGVhbTogbWF0Y2hEYXRhLm1hdGNoLmhvbWVUZWFtLFxuICAgICAgICAgICAgYXdheVRlYW06IG1hdGNoRGF0YS5tYXRjaC5hd2F5VGVhbSxcbiAgICAgICAgICAgIGRhdGU6IG1hdGNoRGF0YS5tYXRjaC5kYXRlLFxuICAgICAgICAgICAgY29tcGV0aXRpb246IG1hdGNoRGF0YS5tYXRjaC5jb21wZXRpdGlvbixcbiAgICAgICAgICAgIHRlYW06IHBsYXllclRlYW1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgIC8vIENhbGN1bGVyIGwnaGlzdG9yaXF1ZSBtZW5zdWVsXG4gICAgICBjb25zdCByYXRpbmdIaXN0b3J5ID0gY2FsY3VsYXRlTW9udGhseUhpc3RvcnkocmF0aW5ncylcblxuICAgICAgLy8gQ2FsY3VsZXIgbGEgcsOpcGFydGl0aW9uIHBhciDDqXF1aXBlXG4gICAgICBjb25zdCB0ZWFtQnJlYWtkb3duID0gY2FsY3VsYXRlVGVhbUJyZWFrZG93bihyYXRpbmdzLCBBcnJheS5mcm9tKGZ1c2VkUGxheWVyLnRlYW1zKSlcblxuICAgICAgLy8gRMOpdGVybWluZXIgbCfDqXF1aXBlIGR1IG1laWxsZXVyIG1hdGNoXG4gICAgICBjb25zdCBiZXN0TWF0Y2hUZWFtID0gZ2V0UGxheWVyVGVhbUZvck1hdGNoKGJlc3RSYXRpbmcubWF0Y2gsIEFycmF5LmZyb20oZnVzZWRQbGF5ZXIudGVhbXMpKVxuXG4gICAgICBiYWxsb25PckNhbmRpZGF0ZXMucHVzaCh7XG4gICAgICAgIGlkOiBgZnVzZWRfJHtub3JtYWxpemVkTmFtZX1gLFxuICAgICAgICBuYW1lOiBmdXNlZFBsYXllci5uYW1lLFxuICAgICAgICBub3JtYWxpemVkTmFtZSxcbiAgICAgICAgcG9zaXRpb25zOiBBcnJheS5mcm9tKGZ1c2VkUGxheWVyLnBvc2l0aW9ucyksXG4gICAgICAgIHRlYW1zOiBBcnJheS5mcm9tKGZ1c2VkUGxheWVyLnRlYW1zKSxcbiAgICAgICAgc3BvcnQ6IGZ1c2VkUGxheWVyLnNwb3J0LFxuICAgICAgICBhdmdSYXRpbmc6IE51bWJlcihhdmdSYXRpbmcudG9GaXhlZCgyKSksXG4gICAgICAgIHRvdGFsUmF0aW5nczogcmF0aW5ncy5sZW5ndGgsXG4gICAgICAgIHRvdGFsTWF0Y2hlcyxcbiAgICAgICAgYmVzdE1hdGNoOiB7XG4gICAgICAgICAgaWQ6IGJlc3RSYXRpbmcubWF0Y2guaWQsXG4gICAgICAgICAgcmF0aW5nOiBiZXN0UmF0aW5nLnJhdGluZyxcbiAgICAgICAgICBob21lVGVhbTogYmVzdFJhdGluZy5tYXRjaC5ob21lVGVhbSxcbiAgICAgICAgICBhd2F5VGVhbTogYmVzdFJhdGluZy5tYXRjaC5hd2F5VGVhbSxcbiAgICAgICAgICBkYXRlOiBiZXN0UmF0aW5nLm1hdGNoLmRhdGUsXG4gICAgICAgICAgY29tcGV0aXRpb246IGJlc3RSYXRpbmcubWF0Y2guY29tcGV0aXRpb24sXG4gICAgICAgICAgdGVhbTogYmVzdE1hdGNoVGVhbVxuICAgICAgICB9LFxuICAgICAgICByZWNlbnRNYXRjaGVzLFxuICAgICAgICByYXRpbmdIaXN0b3J5LFxuICAgICAgICB0ZWFtQnJlYWtkb3duXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIDYuIFRyaWVyIHBhciBtb3llbm5lIGRlcyBub3Rlc1xuICAgIGJhbGxvbk9yQ2FuZGlkYXRlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoTWF0aC5hYnMoYS5hdmdSYXRpbmcgLSBiLmF2Z1JhdGluZykgPCAwLjAxKSB7XG4gICAgICAgIHJldHVybiBiLnRvdGFsTWF0Y2hlcyAtIGEudG90YWxNYXRjaGVzXG4gICAgICB9XG4gICAgICByZXR1cm4gYi5hdmdSYXRpbmcgLSBhLmF2Z1JhdGluZ1xuICAgIH0pXG5cbiAgICAvLyA3LiBMaW1pdGVyIGxlcyByw6lzdWx0YXRzXG4gICAgY29uc3QgdG9wUGxheWVycyA9IGJhbGxvbk9yQ2FuZGlkYXRlcy5zbGljZSgwLCBwYXJzZUludChsaW1pdC50b1N0cmluZygpKSlcblxuICAgIC8vIDguIFN0YXRpc3RpcXVlcyBnbG9iYWxlc1xuICAgIGNvbnN0IGdsb2JhbFN0YXRzID0ge1xuICAgICAgdG90YWxQbGF5ZXJzOiBiYWxsb25PckNhbmRpZGF0ZXMubGVuZ3RoLFxuICAgICAgdG90YWxSYXRpbmdzOiBiYWxsb25PckNhbmRpZGF0ZXMucmVkdWNlKChzdW0sIHApID0+IHN1bSArIHAudG90YWxSYXRpbmdzLCAwKSxcbiAgICAgIHRvdGFsTWF0Y2hlczogYmFsbG9uT3JDYW5kaWRhdGVzLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwLnRvdGFsTWF0Y2hlcywgMCksXG4gICAgICBhdmdSYXRpbmdHbG9iYWw6IGJhbGxvbk9yQ2FuZGlkYXRlcy5sZW5ndGggPiAwIFxuICAgICAgICA/IGJhbGxvbk9yQ2FuZGlkYXRlcy5yZWR1Y2UoKHN1bSwgcCkgPT4gc3VtICsgcC5hdmdSYXRpbmcsIDApIC8gYmFsbG9uT3JDYW5kaWRhdGVzLmxlbmd0aCBcbiAgICAgICAgOiAwLFxuICAgICAgdG9wUmF0aW5nOiB0b3BQbGF5ZXJzWzBdPy5hdmdSYXRpbmcgfHwgMCxcbiAgICAgIHNwb3J0QnJlYWtkb3duOiBjYWxjdWxhdGVTcG9ydEJyZWFrZG93bihiYWxsb25PckNhbmRpZGF0ZXMpLFxuICAgICAgZnVzaW9uU3RhdHM6IHtcbiAgICAgICAgb3JpZ2luYWxQbGF5ZXJzOiBwbGF5ZXJzV2l0aFJhdGluZ3MubGVuZ3RoLFxuICAgICAgICBmdXNlZFBsYXllcnM6IGJhbGxvbk9yQ2FuZGlkYXRlcy5sZW5ndGgsXG4gICAgICAgIGZ1c2lvblJlZHVjdGlvbjogcGxheWVyc1dpdGhSYXRpbmdzLmxlbmd0aCAtIGJhbGxvbk9yQ2FuZGlkYXRlcy5sZW5ndGhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg8J+PhiAke3Nwb3J0ID09PSAnRjEnID8gJ0RyaXZlciBvZiB0aGUgRmFucycgOiAnQmFsbG9uIGRcXCdPcid9IGNhbGN1bMOpOmApXG4gICAgY29uc29sZS5sb2coYCAgIC0gJHtwbGF5ZXJzV2l0aFJhdGluZ3MubGVuZ3RofSBlbnRpdMOpcyBvcmlnaW5hbGVzYClcbiAgICBjb25zb2xlLmxvZyhgICAgLSAke2JhbGxvbk9yQ2FuZGlkYXRlcy5sZW5ndGh9IGVudGl0w6lzIGFwcsOocyBmdXNpb24gaW50ZWxsaWdlbnRlYClcbiAgICBjb25zb2xlLmxvZyhgICAgLSBMZWFkZXI6ICR7dG9wUGxheWVyc1swXT8ubmFtZX0gKCR7dG9wUGxheWVyc1swXT8uYXZnUmF0aW5nfS8xMClgKVxuICAgIGNvbnNvbGUubG9nKGAgICAtIMOJcXVpcGVzOiAke3RvcFBsYXllcnNbMF0/LnRlYW1zLmpvaW4oJywgJyl9YClcblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBiYWxsb25PcjogdG9wUGxheWVycyxcbiAgICAgIHN0YXRzOiBnbG9iYWxTdGF0cyxcbiAgICAgIGZpbHRlcnM6IHtcbiAgICAgICAgc3BvcnQsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgICBwZXJpb2QsXG4gICAgICAgIG1pbk1hdGNoZXM6IHBhcnNlSW50KG1pbk1hdGNoZXMudG9TdHJpbmcoKSksXG4gICAgICAgIHBsYXllcnNPbmx5OiB0cnVlLCAvLyDwn4aVIEluZGljYXRldXIgcXVlIGMnZXN0IHVuaXF1ZW1lbnQgZGVzIGpvdWV1cnMvcGlsb3Rlc1xuICAgICAgICBleGNsdWRlQ29hY2hlczogdHJ1ZSwgLy8g8J+GlSBMZXMgY29hY2hzIHNvbnQgZXhjbHVzXG4gICAgICAgIGV4Y2x1ZGVGMTogc3BvcnQgIT09ICdGMScgJiYgZXhjbHVkZUYxID09PSAndHJ1ZScsIC8vIPCfhpUgRjEgZXhjbHUgc2F1ZiBzaSBleHBsaWNpdGVtZW50IGRlbWFuZMOpXG4gICAgICAgIGlzRjE6IHNwb3J0ID09PSAnRjEnIC8vIPCfhpUgSW5kaWNhdGV1ciBzaSBjJ2VzdCBzcMOpY2lmaXF1ZW1lbnQgRjFcbiAgICAgIH1cbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycmV1ciBCYWxsb24gZFxcJ09yL0RyaXZlcjonLCBlcnJvcilcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnRXJyZXVyIHNlcnZldXInLFxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyZXVyIGluY29ubnVlJ1xuICAgIH0pXG4gIH1cbn1cblxuLy8g8J+noCBGb25jdGlvbiBkZSBub3JtYWxpc2F0aW9uIGludGVsbGlnZW50ZSBkZXMgbm9tcyAtIFZFUlNJT04gQU3DiUxJT1LDiUVcbmZ1bmN0aW9uIG5vcm1hbGl6ZVBsYXllck5hbWUobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgbGV0IG5vcm1hbGl6ZWQgPSBuYW1lXG4gICAgLnRvTG93ZXJDYXNlKClcbiAgICAudHJpbSgpXG4gICAgLy8gU3VwcHJpbWVyIGxlcyBhY2NlbnRzXG4gICAgLm5vcm1hbGl6ZSgnTkZEJykucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgLy8gU3VwcHJpbWVyIGxlcyBjYXJhY3TDqHJlcyBzcMOpY2lhdXggc2F1ZiBlc3BhY2VzIGV0IHRpcmV0c1xuICAgIC5yZXBsYWNlKC9bXmEtelxccy1dL2csICcnKVxuICAgIC8vIFN1cHByaW1lciBsZXMgZG91YmxlcyBlc3BhY2VzXG4gICAgLnJlcGxhY2UoL1xccysvZywgJyAnKVxuICAgIC8vIFN1cHByaW1lciBsZXMgZXNwYWNlcyBlbiBkw6lidXQvZmluXG4gICAgLnRyaW0oKVxuXG4gIC8vIPCflI0gTk9STUFMSVNBVElPTiBTUMOJQ0lBTEUgUE9VUiBMRVMgR1JBTkRFUyBTVEFSU1xuICBjb25zdCBzdGFyTWFwcGluZ3MgPSB7XG4gICAgLy8gTGlvbmVsIE1lc3NpXG4gICAgJ2wgbWVzc2knOiAnbGlvbmVsIG1lc3NpJyxcbiAgICAnbC4gbWVzc2knOiAnbGlvbmVsIG1lc3NpJyxcbiAgICAnbGVvIG1lc3NpJzogJ2xpb25lbCBtZXNzaScsXG4gICAgJ2xpb25lbCBtZXNzaSc6ICdsaW9uZWwgbWVzc2knLFxuICAgICdtZXNzaSc6ICdsaW9uZWwgbWVzc2knLFxuICAgIFxuICAgIC8vIEt5bGlhbiBNYmFwcMOpXG4gICAgJ2sgbWJhcHBlJzogJ2t5bGlhbiBtYmFwcGUnLFxuICAgICdrLiBtYmFwcGUnOiAna3lsaWFuIG1iYXBwZScsXG4gICAgJ2t5bGlhbiBtYmFwcGUnOiAna3lsaWFuIG1iYXBwZScsXG4gICAgJ21iYXBwZSc6ICdreWxpYW4gbWJhcHBlJyxcbiAgICBcbiAgICAvLyBDcmlzdGlhbm8gUm9uYWxkb1xuICAgICdjIHJvbmFsZG8nOiAnY3Jpc3RpYW5vIHJvbmFsZG8nLFxuICAgICdjLiByb25hbGRvJzogJ2NyaXN0aWFubyByb25hbGRvJyxcbiAgICAnY3Jpc3RpYW5vIHJvbmFsZG8nOiAnY3Jpc3RpYW5vIHJvbmFsZG8nLFxuICAgICdyb25hbGRvJzogJ2NyaXN0aWFubyByb25hbGRvJyxcbiAgICAnY3I3JzogJ2NyaXN0aWFubyByb25hbGRvJyxcbiAgICBcbiAgICAvLyBSYXlhbiBDaGVya2lcbiAgICAnciBjaGVya2knOiAncmF5YW4gY2hlcmtpJywgXG4gICAgJ3IuIGNoZXJraSc6ICdyYXlhbiBjaGVya2knLFxuICAgICdyYXlhbiBjaGVya2knOiAncmF5YW4gY2hlcmtpJyxcbiAgICAnY2hlcmtpJzogJ3JheWFuIGNoZXJraScsXG4gICAgXG4gICAgLy8gQW50b2luZSBHcmllem1hbm5cbiAgICAnYSBncmllem1hbm4nOiAnYW50b2luZSBncmllem1hbm4nLFxuICAgICdhLiBncmllem1hbm4nOiAnYW50b2luZSBncmllem1hbm4nLFxuICAgICdhbnRvaW5lIGdyaWV6bWFubic6ICdhbnRvaW5lIGdyaWV6bWFubicsXG4gICAgJ2dyaWV6bWFubic6ICdhbnRvaW5lIGdyaWV6bWFubicsXG4gICAgXG4gICAgLy8gTmV5bWFyXG4gICAgJ25leW1hciBqcic6ICduZXltYXInLFxuICAgICduZXltYXIganVuaW9yJzogJ25leW1hcicsXG4gICAgJ25leW1hcic6ICduZXltYXInLFxuICAgIFxuICAgIC8vIEVybGluZyBIYWFsYW5kXG4gICAgJ2UgaGFhbGFuZCc6ICdlcmxpbmcgaGFhbGFuZCcsXG4gICAgJ2UuIGhhYWxhbmQnOiAnZXJsaW5nIGhhYWxhbmQnLFxuICAgICdlcmxpbmcgaGFhbGFuZCc6ICdlcmxpbmcgaGFhbGFuZCcsXG4gICAgJ2hhYWxhbmQnOiAnZXJsaW5nIGhhYWxhbmQnLFxuICAgIFxuICAgIC8vIFZpbmljaXVzIEpyXG4gICAgJ3ZpbmljaXVzIGpyJzogJ3ZpbmljaXVzIGp1bmlvcicsXG4gICAgJ3ZpbmljaXVzIGp1bmlvcic6ICd2aW5pY2l1cyBqdW5pb3InLFxuICAgICd2aW5pIGpyJzogJ3ZpbmljaXVzIGp1bmlvcicsXG4gICAgJ3ZpbmljaXVzJzogJ3ZpbmljaXVzIGp1bmlvcicsXG4gICAgXG4gICAgLy8gTGVCcm9uIEphbWVzIChiYXNrZXRiYWxsKVxuICAgICdsIGphbWVzJzogJ2xlYnJvbiBqYW1lcycsXG4gICAgJ2wuIGphbWVzJzogJ2xlYnJvbiBqYW1lcycsXG4gICAgJ2xlYnJvbiBqYW1lcyc6ICdsZWJyb24gamFtZXMnLFxuICAgICdqYW1lcyc6ICdsZWJyb24gamFtZXMnLFxuICAgIFxuICAgIC8vIFN0ZXBoZW4gQ3VycnlcbiAgICAncyBjdXJyeSc6ICdzdGVwaGVuIGN1cnJ5JyxcbiAgICAncy4gY3VycnknOiAnc3RlcGhlbiBjdXJyeScsXG4gICAgJ3N0ZXBoZW4gY3VycnknOiAnc3RlcGhlbiBjdXJyeScsXG4gICAgJ3N0ZXBoIGN1cnJ5JzogJ3N0ZXBoZW4gY3VycnknLFxuICAgICdjdXJyeSc6ICdzdGVwaGVuIGN1cnJ5J1xuICB9XG5cbiAgLy8gVsOpcmlmaWVyIHNpIG9uIGEgdW5lIGNvcnJlc3BvbmRhbmNlIGRhbnMgbGVzIG1hcHBpbmdzXG4gIGlmIChzdGFyTWFwcGluZ3Nbbm9ybWFsaXplZF0pIHtcbiAgICBub3JtYWxpemVkID0gc3Rhck1hcHBpbmdzW25vcm1hbGl6ZWRdXG4gICAgY29uc29sZS5sb2coYOKtkCBTdGFyIGTDqXRlY3TDqWU6IFwiJHtuYW1lfVwiIC0+IFwiJHtub3JtYWxpemVkfVwiYClcbiAgICByZXR1cm4gbm9ybWFsaXplZFxuICB9XG5cbiAgLy8g8J+UjSBOT1JNQUxJU0FUSU9OIEfDiU7DiVJJUVVFIFBPVVIgTEVTIElOSVRJQUxFU1xuICAvLyBQYXR0ZXJuOiBcIkluaXRpYWxlLiBOb21cIiAtPiBcInByZW5vbSBub21cIlxuICBjb25zdCBpbml0aWFsUGF0dGVybiA9IC9eKFthLXpdKVxcLlxccyooW2Etel0rKSQvXG4gIGNvbnN0IG1hdGNoID0gbm9ybWFsaXplZC5tYXRjaChpbml0aWFsUGF0dGVybilcbiAgXG4gIGlmIChtYXRjaCkge1xuICAgIGNvbnN0IGluaXRpYWwgPSBtYXRjaFsxXVxuICAgIGNvbnN0IGxhc3ROYW1lID0gbWF0Y2hbMl1cbiAgICBcbiAgICAvLyBFc3NheWVyIGRlIGRldmluZXIgbGUgcHLDqW5vbSBjb21wbGV0IHBvdXIgY2VydGFpbnMgbm9tc1xuICAgIGNvbnN0IGNvbW1vbk5hbWVzID0ge1xuICAgICAgJ20nOiB7IFxuICAgICAgICAnbWJhcHBlJzogJ2t5bGlhbicsXG4gICAgICAgICdzYWxhaCc6ICdtb2hhbWVkJ1xuICAgICAgfSxcbiAgICAgICdsJzoge1xuICAgICAgICAnbWVzc2knOiAnbGlvbmVsJyxcbiAgICAgICAgJ3N1YXJleic6ICdsdWlzJyxcbiAgICAgICAgJ21vZHJpYyc6ICdsdWthJ1xuICAgICAgfSxcbiAgICAgICdjJzoge1xuICAgICAgICAncm9uYWxkbyc6ICdjcmlzdGlhbm8nLFxuICAgICAgICAnbWJhcHBlJzogJ2t5bGlhbicgLy8gQXUgY2FzIG/DuVxuICAgICAgfSxcbiAgICAgICdyJzoge1xuICAgICAgICAnY2hlcmtpJzogJ3JheWFuJyxcbiAgICAgICAgJ21haHJleic6ICdyaXlhZCdcbiAgICAgIH0sXG4gICAgICAnYSc6IHtcbiAgICAgICAgJ2dyaWV6bWFubic6ICdhbnRvaW5lJyxcbiAgICAgICAgJ21iYXBwZSc6ICdreWxpYW4nIC8vIFBhcmZvaXMgbWFsIMOpY3JpdFxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoY29tbW9uTmFtZXNbaW5pdGlhbF0gJiYgY29tbW9uTmFtZXNbaW5pdGlhbF1bbGFzdE5hbWVdKSB7XG4gICAgICBjb25zdCBmdWxsTmFtZSA9IGAke2NvbW1vbk5hbWVzW2luaXRpYWxdW2xhc3ROYW1lXX0gJHtsYXN0TmFtZX1gXG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBFeHBhbnNpb24gaW5pdGlhbGU6IFwiJHtuYW1lfVwiIC0+IFwiJHtmdWxsTmFtZX1cImApXG4gICAgICByZXR1cm4gZnVsbE5hbWVcbiAgICB9XG4gIH1cblxuICBjb25zb2xlLmxvZyhg8J+UjSBOb3JtYWxpc2F0aW9uIHN0YW5kYXJkOiBcIiR7bmFtZX1cIiAtPiBcIiR7bm9ybWFsaXplZH1cImApXG4gIHJldHVybiBub3JtYWxpemVkXG59XG5cbi8vIPCfj47vuI8gRm9uY3Rpb24gZGUgbm9ybWFsaXNhdGlvbiBzcMOpY2lhbGUgcG91ciBsZXMgcGlsb3RlcyBGMVxuZnVuY3Rpb24gbm9ybWFsaXplRHJpdmVyTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgbm9ybWFsaXplZCA9IG5hbWVcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC50cmltKClcbiAgICAubm9ybWFsaXplKCdORkQnKS5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAucmVwbGFjZSgvW15hLXpcXHMtXS9nLCAnJylcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpXG4gICAgLnRyaW0oKVxuXG4gIC8vIPCflI0gTk9STUFMSVNBVElPTiBTUMOJQ0lBTEUgUE9VUiBMRVMgUElMT1RFUyBGMVxuICBjb25zdCBkcml2ZXJNYXBwaW5ncyA9IHtcbiAgICAvLyBNYXggVmVyc3RhcHBlblxuICAgICdtIHZlcnN0YXBwZW4nOiAnbWF4IHZlcnN0YXBwZW4nLFxuICAgICdtLiB2ZXJzdGFwcGVuJzogJ21heCB2ZXJzdGFwcGVuJyxcbiAgICAnbWF4IHZlcnN0YXBwZW4nOiAnbWF4IHZlcnN0YXBwZW4nLFxuICAgICd2ZXJzdGFwcGVuJzogJ21heCB2ZXJzdGFwcGVuJyxcbiAgICBcbiAgICAvLyBMZXdpcyBIYW1pbHRvblxuICAgICdsIGhhbWlsdG9uJzogJ2xld2lzIGhhbWlsdG9uJyxcbiAgICAnbC4gaGFtaWx0b24nOiAnbGV3aXMgaGFtaWx0b24nLFxuICAgICdsZXdpcyBoYW1pbHRvbic6ICdsZXdpcyBoYW1pbHRvbicsXG4gICAgJ2hhbWlsdG9uJzogJ2xld2lzIGhhbWlsdG9uJyxcbiAgICBcbiAgICAvLyBDaGFybGVzIExlY2xlcmNcbiAgICAnYyBsZWNsZXJjJzogJ2NoYXJsZXMgbGVjbGVyYycsXG4gICAgJ2MuIGxlY2xlcmMnOiAnY2hhcmxlcyBsZWNsZXJjJyxcbiAgICAnY2hhcmxlcyBsZWNsZXJjJzogJ2NoYXJsZXMgbGVjbGVyYycsXG4gICAgJ2xlY2xlcmMnOiAnY2hhcmxlcyBsZWNsZXJjJyxcbiAgICBcbiAgICAvLyBMYW5kbyBOb3JyaXNcbiAgICAnbCBub3JyaXMnOiAnbGFuZG8gbm9ycmlzJyxcbiAgICAnbC4gbm9ycmlzJzogJ2xhbmRvIG5vcnJpcycsXG4gICAgJ2xhbmRvIG5vcnJpcyc6ICdsYW5kbyBub3JyaXMnLFxuICAgICdub3JyaXMnOiAnbGFuZG8gbm9ycmlzJyxcbiAgICBcbiAgICAvLyBHZW9yZ2UgUnVzc2VsbFxuICAgICdnIHJ1c3NlbGwnOiAnZ2VvcmdlIHJ1c3NlbGwnLFxuICAgICdnLiBydXNzZWxsJzogJ2dlb3JnZSBydXNzZWxsJyxcbiAgICAnZ2VvcmdlIHJ1c3NlbGwnOiAnZ2VvcmdlIHJ1c3NlbGwnLFxuICAgICdydXNzZWxsJzogJ2dlb3JnZSBydXNzZWxsJyxcbiAgICBcbiAgICAvLyBDYXJsb3MgU2FpbnpcbiAgICAnYyBzYWlueic6ICdjYXJsb3Mgc2FpbnonLFxuICAgICdjLiBzYWlueic6ICdjYXJsb3Mgc2FpbnonLFxuICAgICdjYXJsb3Mgc2FpbnonOiAnY2FybG9zIHNhaW56JyxcbiAgICAnc2FpbnonOiAnY2FybG9zIHNhaW56JyxcbiAgICBcbiAgICAvLyBGZXJuYW5kbyBBbG9uc29cbiAgICAnZiBhbG9uc28nOiAnZmVybmFuZG8gYWxvbnNvJyxcbiAgICAnZi4gYWxvbnNvJzogJ2Zlcm5hbmRvIGFsb25zbycsXG4gICAgJ2Zlcm5hbmRvIGFsb25zbyc6ICdmZXJuYW5kbyBhbG9uc28nLFxuICAgICdhbG9uc28nOiAnZmVybmFuZG8gYWxvbnNvJyxcbiAgICBcbiAgICAvLyBTZXJnaW8gUGVyZXpcbiAgICAncyBwZXJleic6ICdzZXJnaW8gcGVyZXonLFxuICAgICdzLiBwZXJleic6ICdzZXJnaW8gcGVyZXonLFxuICAgICdzZXJnaW8gcGVyZXonOiAnc2VyZ2lvIHBlcmV6JyxcbiAgICAnY2hlY28gcGVyZXonOiAnc2VyZ2lvIHBlcmV6JyxcbiAgICAncGVyZXonOiAnc2VyZ2lvIHBlcmV6J1xuICB9XG5cbiAgLy8gVsOpcmlmaWVyIHNpIG9uIGEgdW5lIGNvcnJlc3BvbmRhbmNlIGRhbnMgbGVzIG1hcHBpbmdzXG4gIGlmIChkcml2ZXJNYXBwaW5nc1tub3JtYWxpemVkXSkge1xuICAgIG5vcm1hbGl6ZWQgPSBkcml2ZXJNYXBwaW5nc1tub3JtYWxpemVkXVxuICAgIGNvbnNvbGUubG9nKGDwn4+O77iPIFBpbG90ZSBkw6l0ZWN0w6k6IFwiJHtuYW1lfVwiIC0+IFwiJHtub3JtYWxpemVkfVwiYClcbiAgICByZXR1cm4gbm9ybWFsaXplZFxuICB9XG5cbiAgY29uc29sZS5sb2coYPCflI0gTm9ybWFsaXNhdGlvbiBwaWxvdGUgc3RhbmRhcmQ6IFwiJHtuYW1lfVwiIC0+IFwiJHtub3JtYWxpemVkfVwiYClcbiAgcmV0dXJuIG5vcm1hbGl6ZWRcbn1cblxuLy8g8J+OryBGb25jdGlvbiBwb3VyIGNob2lzaXIgbGUgbWVpbGxldXIgbm9tIGQnYWZmaWNoYWdlXG5mdW5jdGlvbiBjaG9vc2VCZXN0UGxheWVyTmFtZShvcmlnaW5hbE5hbWU6IHN0cmluZywgbm9ybWFsaXplZE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIFByw6lmw6lyZXIgbGVzIG5vbXMgY29tcGxldHMgYXV4IGluaXRpYWxlc1xuICBjb25zdCBoYXNJbml0aWFsID0gb3JpZ2luYWxOYW1lLmluY2x1ZGVzKCcuJylcbiAgXG4gIC8vIFBvdXIgbGVzIHN0YXJzIGNvbm51ZXMsIHV0aWxpc2VyIGxlIG5vbSBjb21wbGV0IGNhbm9uaXF1ZVxuICBjb25zdCBjYW5vbmljYWxOYW1lcyA9IHtcbiAgICAnbGlvbmVsIG1lc3NpJzogJ0xpb25lbCBNZXNzaScsXG4gICAgJ2NyaXN0aWFubyByb25hbGRvJzogJ0NyaXN0aWFubyBSb25hbGRvJyxcbiAgICAna3lsaWFuIG1iYXBwZSc6ICdLeWxpYW4gTWJhcHDDqScsXG4gICAgJ25leW1hcic6ICdOZXltYXIgSnInLFxuICAgICdlcmxpbmcgaGFhbGFuZCc6ICdFcmxpbmcgSGFhbGFuZCcsXG4gICAgJ3ZpbmljaXVzIGp1bmlvcic6ICdWaW5pY2l1cyBKcicsXG4gICAgJ3JheWFuIGNoZXJraSc6ICdSYXlhbiBDaGVya2knLFxuICAgICdhbnRvaW5lIGdyaWV6bWFubic6ICdBbnRvaW5lIEdyaWV6bWFubicsXG4gICAgJ2xlYnJvbiBqYW1lcyc6ICdMZUJyb24gSmFtZXMnLFxuICAgICdzdGVwaGVuIGN1cnJ5JzogJ1N0ZXBoZW4gQ3VycnknXG4gIH1cbiAgXG4gIC8vIFNpIG9uIGEgdW4gbm9tIGNhbm9uaXF1ZSwgbCd1dGlsaXNlclxuICBpZiAoY2Fub25pY2FsTmFtZXNbbm9ybWFsaXplZE5hbWVdKSB7XG4gICAgY29uc29sZS5sb2coYOKtkCBOb20gY2Fub25pcXVlIGNob2lzaTogJHtjYW5vbmljYWxOYW1lc1tub3JtYWxpemVkTmFtZV19YClcbiAgICByZXR1cm4gY2Fub25pY2FsTmFtZXNbbm9ybWFsaXplZE5hbWVdXG4gIH1cbiAgXG4gIC8vIFNpbm9uLCBwcsOpZsOpcmVyIGxlIG5vbSBzYW5zIGluaXRpYWxlXG4gIGlmIChoYXNJbml0aWFsKSB7XG4gICAgLy8gRXNzYXllciBkZSBjb25zdHJ1aXJlIHVuIG5vbSBjb21wbGV0XG4gICAgY29uc3QgcGFydHMgPSBvcmlnaW5hbE5hbWUuc3BsaXQoJyAnKVxuICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMiAmJiBwYXJ0c1swXS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBGb3JtYXQgXCJBLiBOb21cIiAtPiBnYXJkZXIgdGVsIHF1ZWwgc2kgcGFzIGRlIGNvcnJlc3BvbmRhbmNlXG4gICAgICByZXR1cm4gb3JpZ2luYWxOYW1lXG4gICAgfVxuICB9XG4gIFxuICAvLyBDYXBpdGFsaXNlciBwcm9wcmVtZW50IGxlIG5vbSBvcmlnaW5hbFxuICByZXR1cm4gb3JpZ2luYWxOYW1lXG4gICAgLnNwbGl0KCcgJylcbiAgICAubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKSlcbiAgICAuam9pbignICcpXG59XG5cbi8vIPCfj47vuI8gRm9uY3Rpb24gcG91ciBjaG9pc2lyIGxlIG1laWxsZXVyIG5vbSBkJ2FmZmljaGFnZSBwb3VyIGxlcyBwaWxvdGVzXG5mdW5jdGlvbiBjaG9vc2VCZXN0RHJpdmVyTmFtZShvcmlnaW5hbE5hbWU6IHN0cmluZywgbm9ybWFsaXplZE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIE5vbXMgY2Fub25pcXVlcyBwb3VyIGxlcyBwaWxvdGVzIEYxXG4gIGNvbnN0IGNhbm9uaWNhbERyaXZlck5hbWVzID0ge1xuICAgICdtYXggdmVyc3RhcHBlbic6ICdNYXggVmVyc3RhcHBlbicsXG4gICAgJ2xld2lzIGhhbWlsdG9uJzogJ0xld2lzIEhhbWlsdG9uJyxcbiAgICAnY2hhcmxlcyBsZWNsZXJjJzogJ0NoYXJsZXMgTGVjbGVyYycsXG4gICAgJ2xhbmRvIG5vcnJpcyc6ICdMYW5kbyBOb3JyaXMnLFxuICAgICdnZW9yZ2UgcnVzc2VsbCc6ICdHZW9yZ2UgUnVzc2VsbCcsXG4gICAgJ2NhcmxvcyBzYWlueic6ICdDYXJsb3MgU2FpbnonLFxuICAgICdmZXJuYW5kbyBhbG9uc28nOiAnRmVybmFuZG8gQWxvbnNvJyxcbiAgICAnc2VyZ2lvIHBlcmV6JzogJ1NlcmdpbyBQw6lyZXonXG4gIH1cbiAgXG4gIC8vIFNpIG9uIGEgdW4gbm9tIGNhbm9uaXF1ZSwgbCd1dGlsaXNlclxuICBpZiAoY2Fub25pY2FsRHJpdmVyTmFtZXNbbm9ybWFsaXplZE5hbWVdKSB7XG4gICAgY29uc29sZS5sb2coYPCfj47vuI8gTm9tIGNhbm9uaXF1ZSBwaWxvdGUgY2hvaXNpOiAke2Nhbm9uaWNhbERyaXZlck5hbWVzW25vcm1hbGl6ZWROYW1lXX1gKVxuICAgIHJldHVybiBjYW5vbmljYWxEcml2ZXJOYW1lc1tub3JtYWxpemVkTmFtZV1cbiAgfVxuICBcbiAgLy8gU2lub24sIGNhcGl0YWxpc2VyIHByb3ByZW1lbnQgbGUgbm9tIG9yaWdpbmFsXG4gIHJldHVybiBvcmlnaW5hbE5hbWVcbiAgICAuc3BsaXQoJyAnKVxuICAgIC5tYXAod29yZCA9PiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpKVxuICAgIC5qb2luKCcgJylcbn1cblxuLy8gRm9uY3Rpb24gcG91ciBkw6l0ZXJtaW5lciBsJ8OpcXVpcGUgZHUgam91ZXVyL3BpbG90ZSBkYW5zIHVuIG1hdGNoXG5mdW5jdGlvbiBnZXRQbGF5ZXJUZWFtRm9yTWF0Y2gobWF0Y2g6IGFueSwgcGxheWVyVGVhbXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgLy8gRXNzYXllciBkZSBmYWlyZSBjb3JyZXNwb25kcmUgYXZlYyBsZXMgw6lxdWlwZXMgZHUgbWF0Y2hcbiAgY29uc3QgaG9tZVRlYW0gPSBtYXRjaC5ob21lVGVhbS50b0xvd2VyQ2FzZSgpXG4gIGNvbnN0IGF3YXlUZWFtID0gbWF0Y2guYXdheVRlYW0udG9Mb3dlckNhc2UoKVxuICBcbiAgZm9yIChjb25zdCB0ZWFtIG9mIHBsYXllclRlYW1zKSB7XG4gICAgY29uc3QgdGVhbUxvd2VyID0gdGVhbS50b0xvd2VyQ2FzZSgpXG4gICAgXG4gICAgLy8gQ29ycmVzcG9uZGFuY2UgZXhhY3RlIG91IHBhcnRpZWxsZVxuICAgIGlmIChob21lVGVhbS5pbmNsdWRlcyh0ZWFtTG93ZXIpIHx8IHRlYW1Mb3dlci5pbmNsdWRlcyhob21lVGVhbS5zcGxpdCgnICcpWzBdKSkge1xuICAgICAgcmV0dXJuIG1hdGNoLmhvbWVUZWFtXG4gICAgfVxuICAgIGlmIChhd2F5VGVhbS5pbmNsdWRlcyh0ZWFtTG93ZXIpIHx8IHRlYW1Mb3dlci5pbmNsdWRlcyhhd2F5VGVhbS5zcGxpdCgnICcpWzBdKSkge1xuICAgICAgcmV0dXJuIG1hdGNoLmF3YXlUZWFtXG4gICAgfVxuICAgIFxuICAgIC8vIFBvdXIgbGVzIMOpcXVpcGVzIG5hdGlvbmFsZXNcbiAgICBpZiAodGVhbS5pbmNsdWRlcygnRnJhbmNlJykgJiYgKGhvbWVUZWFtLmluY2x1ZGVzKCdmcmFuY2UnKSB8fCBhd2F5VGVhbS5pbmNsdWRlcygnZnJhbmNlJykpKSB7XG4gICAgICByZXR1cm4gaG9tZVRlYW0uaW5jbHVkZXMoJ2ZyYW5jZScpID8gbWF0Y2guaG9tZVRlYW0gOiBtYXRjaC5hd2F5VGVhbVxuICAgIH1cbiAgfVxuICBcbiAgLy8gU2kgYXVjdW5lIGNvcnJlc3BvbmRhbmNlLCByZXRvdXJuZXIgbGEgcHJlbWnDqHJlIMOpcXVpcGUgY29ubnVlXG4gIHJldHVybiBwbGF5ZXJUZWFtc1swXSB8fCAnw4lxdWlwZSBpbmNvbm51ZSdcbn1cblxuLy8gQ2FsY3VsZXIgbGEgcsOpcGFydGl0aW9uIHBhciDDqXF1aXBlXG5mdW5jdGlvbiBjYWxjdWxhdGVUZWFtQnJlYWtkb3duKHJhdGluZ3M6IGFueVtdLCB0ZWFtczogc3RyaW5nW10pIHtcbiAgY29uc3QgdGVhbVN0YXRzID0gbmV3IE1hcCgpXG4gIFxuICAvLyBJbml0aWFsaXNlciBsZXMgc3RhdHMgcG91ciBjaGFxdWUgw6lxdWlwZVxuICB0ZWFtcy5mb3JFYWNoKHRlYW0gPT4ge1xuICAgIHRlYW1TdGF0cy5zZXQodGVhbSwge1xuICAgICAgdGVhbSxcbiAgICAgIHJhdGluZ3M6IFtdLFxuICAgICAgbWF0Y2hlczogbmV3IFNldCgpXG4gICAgfSlcbiAgfSlcbiAgXG4gIC8vIFLDqXBhcnRpciBsZXMgcmF0aW5ncyBwYXIgw6lxdWlwZSAoYmFzw6kgc3VyIGxlIG1hdGNoKVxuICByYXRpbmdzLmZvckVhY2gocmF0aW5nID0+IHtcbiAgICBjb25zdCBwbGF5ZXJUZWFtID0gZ2V0UGxheWVyVGVhbUZvck1hdGNoKHJhdGluZy5tYXRjaCwgdGVhbXMpXG4gICAgY29uc3Qgbm9ybWFsaXplZFRlYW0gPSB0ZWFtcy5maW5kKHQgPT4gXG4gICAgICB0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGxheWVyVGVhbS50b0xvd2VyQ2FzZSgpKSB8fCBcbiAgICAgIHBsYXllclRlYW0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0LnRvTG93ZXJDYXNlKCkpXG4gICAgKSB8fCB0ZWFtc1swXVxuICAgIFxuICAgIGlmICh0ZWFtU3RhdHMuaGFzKG5vcm1hbGl6ZWRUZWFtKSkge1xuICAgICAgdGVhbVN0YXRzLmdldChub3JtYWxpemVkVGVhbSkucmF0aW5ncy5wdXNoKHJhdGluZy5yYXRpbmcpXG4gICAgICB0ZWFtU3RhdHMuZ2V0KG5vcm1hbGl6ZWRUZWFtKS5tYXRjaGVzLmFkZChyYXRpbmcubWF0Y2guaWQpXG4gICAgfVxuICB9KVxuICBcbiAgLy8gQ2FsY3VsZXIgbGVzIG1veWVubmVzXG4gIHJldHVybiBBcnJheS5mcm9tKHRlYW1TdGF0cy52YWx1ZXMoKSlcbiAgICAuZmlsdGVyKHN0YXRzID0+IHN0YXRzLnJhdGluZ3MubGVuZ3RoID4gMClcbiAgICAubWFwKHN0YXRzID0+ICh7XG4gICAgICB0ZWFtOiBzdGF0cy50ZWFtLFxuICAgICAgYXZnUmF0aW5nOiBOdW1iZXIoKHN0YXRzLnJhdGluZ3MucmVkdWNlKChzdW06IG51bWJlciwgcjogbnVtYmVyKSA9PiBzdW0gKyByLCAwKSAvIHN0YXRzLnJhdGluZ3MubGVuZ3RoKS50b0ZpeGVkKDIpKSxcbiAgICAgIG1hdGNoQ291bnQ6IHN0YXRzLm1hdGNoZXMuc2l6ZSxcbiAgICAgIHJhdGluZ0NvdW50OiBzdGF0cy5yYXRpbmdzLmxlbmd0aFxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLmF2Z1JhdGluZyAtIGEuYXZnUmF0aW5nKVxufVxuXG4vLyBGb25jdGlvbnMgdXRpbGl0YWlyZXMgZXhpc3RhbnRlcyAoaW5jaGFuZ8OpZXMpXG5mdW5jdGlvbiBjYWxjdWxhdGVNb250aGx5SGlzdG9yeShyYXRpbmdzOiBhbnlbXSk6IEFycmF5PHttb250aDogc3RyaW5nLCBhdmdSYXRpbmc6IG51bWJlciwgbWF0Y2hDb3VudDogbnVtYmVyfT4ge1xuICBjb25zdCBtb250aGx5RGF0YSA9IG5ldyBNYXAoKVxuICBcbiAgcmF0aW5ncy5mb3JFYWNoKHJhdGluZyA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHJhdGluZy5jcmVhdGVkQXQpXG4gICAgY29uc3QgbW9udGhLZXkgPSBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LSR7KGRhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gXG4gICAgXG4gICAgaWYgKCFtb250aGx5RGF0YS5oYXMobW9udGhLZXkpKSB7XG4gICAgICBtb250aGx5RGF0YS5zZXQobW9udGhLZXksIHtcbiAgICAgICAgcmF0aW5nczogW10sXG4gICAgICAgIG1hdGNoZXM6IG5ldyBTZXQoKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgbW9udGhseURhdGEuZ2V0KG1vbnRoS2V5KS5yYXRpbmdzLnB1c2gocmF0aW5nLnJhdGluZylcbiAgICBtb250aGx5RGF0YS5nZXQobW9udGhLZXkpLm1hdGNoZXMuYWRkKHJhdGluZy5tYXRjaC5pZClcbiAgfSlcblxuICByZXR1cm4gQXJyYXkuZnJvbShtb250aGx5RGF0YS5lbnRyaWVzKCkpXG4gICAgLm1hcCgoW21vbnRoLCBkYXRhXSkgPT4gKHtcbiAgICAgIG1vbnRoLFxuICAgICAgYXZnUmF0aW5nOiBOdW1iZXIoKGRhdGEucmF0aW5ncy5yZWR1Y2UoKHN1bTogbnVtYmVyLCByOiBudW1iZXIpID0+IHN1bSArIHIsIDApIC8gZGF0YS5yYXRpbmdzLmxlbmd0aCkudG9GaXhlZCgyKSksXG4gICAgICBtYXRjaENvdW50OiBkYXRhLm1hdGNoZXMuc2l6ZVxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBhLm1vbnRoLmxvY2FsZUNvbXBhcmUoYi5tb250aCkpXG4gICAgLnNsaWNlKC0xMilcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlU3BvcnRCcmVha2Rvd24ocGxheWVyczogQmFsbG9uT3JQbGF5ZXJbXSkge1xuICBjb25zdCBicmVha2Rvd24gPSBuZXcgTWFwKClcbiAgXG4gIHBsYXllcnMuZm9yRWFjaChwbGF5ZXIgPT4ge1xuICAgIGlmICghYnJlYWtkb3duLmhhcyhwbGF5ZXIuc3BvcnQpKSB7XG4gICAgICBicmVha2Rvd24uc2V0KHBsYXllci5zcG9ydCwge1xuICAgICAgICBjb3VudDogMCxcbiAgICAgICAgdG90YWxSYXRpbmdzOiAwXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBkYXRhID0gYnJlYWtkb3duLmdldChwbGF5ZXIuc3BvcnQpXG4gICAgZGF0YS5jb3VudCsrXG4gICAgZGF0YS50b3RhbFJhdGluZ3MgKz0gcGxheWVyLnRvdGFsUmF0aW5nc1xuICB9KVxuXG4gIHJldHVybiBBcnJheS5mcm9tKGJyZWFrZG93bi5lbnRyaWVzKCkpLm1hcCgoW3Nwb3J0LCBkYXRhXSkgPT4gKHtcbiAgICBzcG9ydCxcbiAgICBwbGF5ZXJDb3VudDogZGF0YS5jb3VudCxcbiAgICBhdmdSYXRpbmc6IHBsYXllcnNcbiAgICAgIC5maWx0ZXIocCA9PiBwLnNwb3J0ID09PSBzcG9ydClcbiAgICAgIC5yZWR1Y2UoKHN1bSwgcCkgPT4gc3VtICsgcC5hdmdSYXRpbmcsIDApIC8gZGF0YS5jb3VudCxcbiAgICB0b3RhbFJhdGluZ3M6IGRhdGEudG90YWxSYXRpbmdzXG4gIH0pKVxufSJdLCJuYW1lcyI6WyJwcmlzbWEiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwic3BvcnQiLCJwb3NpdGlvbiIsIm1pbk1hdGNoZXMiLCJsaW1pdCIsInBlcmlvZCIsImV4Y2x1ZGVGMSIsInF1ZXJ5IiwiY29uc29sZSIsImxvZyIsInNwb3J0RmlsdGVyIiwidG9TdHJpbmciLCJ0b1VwcGVyQ2FzZSIsIm5vdCIsInBvc2l0aW9uRmlsdGVyIiwiZGF0ZUZpbHRlciIsIm5vdyIsIkRhdGUiLCJ5ZWFyQWdvIiwic2V0RnVsbFllYXIiLCJnZXRGdWxsWWVhciIsImNyZWF0ZWRBdCIsImd0ZSIsInNlYXNvblN0YXJ0Iiwic2V0TW9udGgiLCJnZXRNb250aCIsInNpeE1vbnRoc0FnbyIsImFkZGl0aW9uYWxGaWx0ZXJzIiwicGxheWVyc1dpdGhSYXRpbmdzIiwicGxheWVyIiwiZmluZE1hbnkiLCJ3aGVyZSIsInJhdGluZ3MiLCJzb21lIiwiaW5jbHVkZSIsIm1hdGNoIiwic2VsZWN0IiwiaWQiLCJob21lVGVhbSIsImF3YXlUZWFtIiwiZGF0ZSIsImNvbXBldGl0aW9uIiwidXNlciIsIm5hbWUiLCJvcmRlckJ5IiwibGVuZ3RoIiwiZnVzZWRQbGF5ZXJzIiwiTWFwIiwibm9ybWFsaXplZE5hbWUiLCJub3JtYWxpemVEcml2ZXJOYW1lIiwibm9ybWFsaXplUGxheWVyTmFtZSIsImhhcyIsImV4aXN0aW5nUGxheWVyIiwiZ2V0IiwicHVzaCIsInRlYW1zIiwiYWRkIiwidGVhbSIsInBvc2l0aW9ucyIsIkFycmF5IiwiZnJvbSIsImpvaW4iLCJzZXQiLCJvcmlnaW5hbElkIiwiY2hvb3NlQmVzdERyaXZlck5hbWUiLCJjaG9vc2VCZXN0UGxheWVyTmFtZSIsIlNldCIsInNpemUiLCJiYWxsb25PckNhbmRpZGF0ZXMiLCJmdXNlZFBsYXllciIsImVudHJpZXMiLCJwYXJzZUludCIsImF2Z1JhdGluZyIsInJlZHVjZSIsInN1bSIsInIiLCJyYXRpbmciLCJiZXN0UmF0aW5nIiwiYmVzdCIsImN1cnJlbnQiLCJ1bmlxdWVNYXRjaGVzIiwiZm9yRWFjaCIsIm1hdGNoSWQiLCJ0b3RhbE1hdGNoZXMiLCJyZWNlbnRNYXRjaGVzIiwidmFsdWVzIiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSIsInNsaWNlIiwibWFwIiwibWF0Y2hEYXRhIiwibWF0Y2hBdmdSYXRpbmciLCJiZXN0Q29tbWVudCIsImZpbmQiLCJjb21tZW50IiwicGxheWVyVGVhbSIsImdldFBsYXllclRlYW1Gb3JNYXRjaCIsIk51bWJlciIsInRvRml4ZWQiLCJyYXRpbmdIaXN0b3J5IiwiY2FsY3VsYXRlTW9udGhseUhpc3RvcnkiLCJ0ZWFtQnJlYWtkb3duIiwiY2FsY3VsYXRlVGVhbUJyZWFrZG93biIsImJlc3RNYXRjaFRlYW0iLCJ0b3RhbFJhdGluZ3MiLCJiZXN0TWF0Y2giLCJNYXRoIiwiYWJzIiwidG9wUGxheWVycyIsImdsb2JhbFN0YXRzIiwidG90YWxQbGF5ZXJzIiwicCIsImF2Z1JhdGluZ0dsb2JhbCIsInRvcFJhdGluZyIsInNwb3J0QnJlYWtkb3duIiwiY2FsY3VsYXRlU3BvcnRCcmVha2Rvd24iLCJmdXNpb25TdGF0cyIsIm9yaWdpbmFsUGxheWVycyIsImZ1c2lvblJlZHVjdGlvbiIsInN1Y2Nlc3MiLCJiYWxsb25PciIsInN0YXRzIiwiZmlsdGVycyIsInBsYXllcnNPbmx5IiwiZXhjbHVkZUNvYWNoZXMiLCJpc0YxIiwiZGV0YWlscyIsIkVycm9yIiwibWVzc2FnZSIsIm5vcm1hbGl6ZWQiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJub3JtYWxpemUiLCJyZXBsYWNlIiwic3Rhck1hcHBpbmdzIiwiaW5pdGlhbFBhdHRlcm4iLCJpbml0aWFsIiwibGFzdE5hbWUiLCJjb21tb25OYW1lcyIsImZ1bGxOYW1lIiwiZHJpdmVyTWFwcGluZ3MiLCJvcmlnaW5hbE5hbWUiLCJoYXNJbml0aWFsIiwiaW5jbHVkZXMiLCJjYW5vbmljYWxOYW1lcyIsInBhcnRzIiwic3BsaXQiLCJ3b3JkIiwiY2hhckF0IiwiY2Fub25pY2FsRHJpdmVyTmFtZXMiLCJwbGF5ZXJUZWFtcyIsInRlYW1Mb3dlciIsInRlYW1TdGF0cyIsIm1hdGNoZXMiLCJub3JtYWxpemVkVGVhbSIsInQiLCJmaWx0ZXIiLCJtYXRjaENvdW50IiwicmF0aW5nQ291bnQiLCJtb250aGx5RGF0YSIsIm1vbnRoS2V5IiwicGFkU3RhcnQiLCJtb250aCIsImRhdGEiLCJsb2NhbGVDb21wYXJlIiwicGxheWVycyIsImJyZWFrZG93biIsImNvdW50IiwicGxheWVyQ291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/ballon-or.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fballon-or&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fballon-or.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();