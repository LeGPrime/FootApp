"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/match-community-stats";
exports.ids = ["pages/api/match-community-stats"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmatch-community-stats&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmatch-community-stats.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmatch-community-stats&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmatch-community-stats.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_match_community_stats_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/match-community-stats.ts */ \"(api)/./pages/api/match-community-stats.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_match_community_stats_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_match_community_stats_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/match-community-stats\",\n        pathname: \"/api/match-community-stats\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_match_community_stats_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm1hdGNoLWNvbW11bml0eS1zdGF0cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGbWF0Y2gtY29tbXVuaXR5LXN0YXRzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2lFO0FBQ2pFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxnRUFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsZ0VBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9vdHJhdGUvP2ZiODUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9tYXRjaC1jb21tdW5pdHktc3RhdHMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tYXRjaC1jb21tdW5pdHktc3RhdHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tYXRjaC1jb21tdW5pdHktc3RhdHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmatch-community-stats&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmatch-community-stats.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFFO0FBRWxFLElBQUlJLElBQXlCLEVBQWNILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zvb3RyYXRlLy4vbGliL3ByaXNtYS50cz85ODIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxufVxuXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KClcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/match-community-stats.ts":
/*!********************************************!*\
  !*** ./pages/api/match-community-stats.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n// pages/api/match-community-stats.ts\n\nasync function handler(req, res) {\n    if (req.method === \"GET\") {\n        try {\n            const { matchId } = req.query;\n            if (!matchId) {\n                return res.status(400).json({\n                    error: \"Match ID requis\"\n                });\n            }\n            // 1. Répartition des notes\n            const ratingDistribution = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.$queryRaw`\n        SELECT \n          rating,\n          COUNT(*) as count,\n          ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 1) as percentage\n        FROM ratings \n        WHERE match_id = ${matchId}\n        GROUP BY rating\n        ORDER BY rating DESC\n      `;\n            // 2. Total des commentaires avec contenu\n            const totalComments = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.rating.count({\n                where: {\n                    matchId: matchId,\n                    comment: {\n                        not: null,\n                        not: \"\"\n                    }\n                }\n            });\n            // 3. Total des likes sur les reviews de ce match\n            const totalLikesResult = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.$queryRaw`\n        SELECT COUNT(*) as total\n        FROM review_likes rl\n        JOIN ratings r ON rl.review_id = r.id\n        WHERE r.match_id = ${matchId}\n      `;\n            // 4. Top reviewer (utilisateur avec le plus de likes sur ce match)\n            const topReviewerResult = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.$queryRaw`\n        SELECT \n          u.id,\n          u.name,\n          u.username,\n          u.image,\n          COUNT(rl.id) as likes,\n          r.rating,\n          r.comment\n        FROM users u\n        JOIN ratings r ON u.id = r.user_id\n        LEFT JOIN review_likes rl ON r.id = rl.review_id\n        WHERE r.match_id = ${matchId} \n          AND r.comment IS NOT NULL \n          AND r.comment != ''\n        GROUP BY u.id, u.name, u.username, u.image, r.rating, r.comment\n        ORDER BY likes DESC, r.rating DESC\n        LIMIT 1\n      `;\n            // 5. Activité récente (reviews des dernières 24h)\n            const recentActivity = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.rating.count({\n                where: {\n                    matchId: matchId,\n                    comment: {\n                        not: null,\n                        not: \"\"\n                    },\n                    createdAt: {\n                        gte: new Date(Date.now() - 24 * 60 * 60 * 1000)\n                    }\n                }\n            });\n            // 6. Statistiques par période (pour le graphique d'activité)\n            const activityByHour = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.$queryRaw`\n        SELECT \n          EXTRACT(HOUR FROM created_at) as hour,\n          COUNT(*) as comments\n        FROM ratings\n        WHERE match_id = ${matchId}\n          AND comment IS NOT NULL \n          AND comment != ''\n          AND created_at >= NOW() - INTERVAL '24 hours'\n        GROUP BY EXTRACT(HOUR FROM created_at)\n        ORDER BY hour\n      `;\n            // 7. Mots-clés populaires dans les commentaires (simple analyse)\n            const popularWords = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.$queryRaw`\n        SELECT \n          word,\n          COUNT(*) as frequency\n        FROM (\n          SELECT UNNEST(\n            STRING_TO_ARRAY(\n              REGEXP_REPLACE(\n                LOWER(comment), \n                '[^a-záàâäéèêëïîôöùûüç\\s]', \n                '', \n                'g'\n              ), \n              ' '\n            )\n          ) as word\n          FROM ratings \n          WHERE match_id = ${matchId}\n            AND comment IS NOT NULL \n            AND comment != ''\n        ) words\n        WHERE LENGTH(word) > 3\n          AND word NOT IN ('avec', 'dans', 'pour', 'cette', 'plus', 'très', 'tout', 'bien', 'mais', 'comme', 'sans', 'alors')\n        GROUP BY word\n        HAVING COUNT(*) > 1\n        ORDER BY frequency DESC\n        LIMIT 10\n      `;\n            const stats = {\n                ratingDistribution: ratingDistribution.map((item)=>({\n                        rating: parseInt(item.rating),\n                        count: parseInt(item.count),\n                        percentage: parseFloat(item.percentage)\n                    })),\n                totalComments,\n                totalLikes: parseInt(totalLikesResult[0]?.total || \"0\"),\n                topReviewer: topReviewerResult[0] ? {\n                    id: topReviewerResult[0].id,\n                    name: topReviewerResult[0].name,\n                    username: topReviewerResult[0].username,\n                    image: topReviewerResult[0].image,\n                    likes: parseInt(topReviewerResult[0].likes),\n                    rating: topReviewerResult[0].rating,\n                    comment: topReviewerResult[0].comment\n                } : null,\n                recentActivity,\n                activityByHour: activityByHour.map((item)=>({\n                        hour: parseInt(item.hour),\n                        comments: parseInt(item.comments)\n                    })),\n                popularWords: popularWords.map((item)=>({\n                        word: item.word,\n                        frequency: parseInt(item.frequency)\n                    })),\n                // Quelques métriques calculées\n                avgRating: ratingDistribution.length > 0 ? ratingDistribution.reduce((sum, item)=>sum + parseInt(item.rating) * parseInt(item.count), 0) / ratingDistribution.reduce((sum, item)=>sum + parseInt(item.count), 0) : 0,\n                engagementRate: totalComments > 0 ? ((parseInt(totalLikesResult[0]?.total || \"0\") + recentActivity) / totalComments * 100).toFixed(1) : 0\n            };\n            res.status(200).json({\n                success: true,\n                stats\n            });\n        } catch (error) {\n            console.error(\"Erreur stats communaut\\xe9:\", error);\n            res.status(500).json({\n                error: \"Erreur serveur\"\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", [\n            \"GET\"\n        ]);\n        res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvbWF0Y2gtY29tbXVuaXR5LXN0YXRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEscUNBQXFDO0FBRUk7QUFFMUIsZUFBZUMsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87UUFDeEIsSUFBSTtZQUNGLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUdILElBQUlJLEtBQUs7WUFFN0IsSUFBSSxDQUFDRCxTQUFTO2dCQUNaLE9BQU9GLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQWtCO1lBQ3pEO1lBRUEsMkJBQTJCO1lBQzNCLE1BQU1DLHFCQUFxQixNQUFNViwrQ0FBTUEsQ0FBQ1csU0FBUyxDQUFDOzs7Ozs7eUJBTS9CLEVBQUVOLFFBQVE7OztNQUc3QixDQUFDO1lBRUQseUNBQXlDO1lBQ3pDLE1BQU1PLGdCQUFnQixNQUFNWiwrQ0FBTUEsQ0FBQ2EsTUFBTSxDQUFDQyxLQUFLLENBQUM7Z0JBQzlDQyxPQUFPO29CQUNMVixTQUFTQTtvQkFDVFcsU0FBUzt3QkFDUEMsS0FBSzt3QkFDTEEsS0FBSztvQkFDUDtnQkFDRjtZQUNGO1lBRUEsaURBQWlEO1lBQ2pELE1BQU1DLG1CQUFtQixNQUFNbEIsK0NBQU1BLENBQUNXLFNBQVMsQ0FBQzs7OzsyQkFJM0IsRUFBRU4sUUFBUTtNQUMvQixDQUFDO1lBRUQsbUVBQW1FO1lBQ25FLE1BQU1jLG9CQUFvQixNQUFNbkIsK0NBQU1BLENBQUNXLFNBQVMsQ0FBQzs7Ozs7Ozs7Ozs7OzJCQVk1QixFQUFFTixRQUFROzs7Ozs7TUFNL0IsQ0FBQztZQUVELGtEQUFrRDtZQUNsRCxNQUFNZSxpQkFBaUIsTUFBTXBCLCtDQUFNQSxDQUFDYSxNQUFNLENBQUNDLEtBQUssQ0FBQztnQkFDL0NDLE9BQU87b0JBQ0xWLFNBQVNBO29CQUNUVyxTQUFTO3dCQUNQQyxLQUFLO3dCQUNMQSxLQUFLO29CQUNQO29C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cmNlcyI6WyJ3ZWJwYWNrOi8vZm9vdHJhdGUvLi9wYWdlcy9hcGkvbWF0Y2gtY29tbXVuaXR5LXN0YXRzLnRzP2NmMTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL21hdGNoLWNvbW11bml0eS1zdGF0cy50c1xuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi8uLi9saWIvcHJpc21hJ1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IG1hdGNoSWQgfSA9IHJlcS5xdWVyeVxuXG4gICAgICBpZiAoIW1hdGNoSWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNYXRjaCBJRCByZXF1aXMnIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIDEuIFLDqXBhcnRpdGlvbiBkZXMgbm90ZXNcbiAgICAgIGNvbnN0IHJhdGluZ0Rpc3RyaWJ1dGlvbiA9IGF3YWl0IHByaXNtYS4kcXVlcnlSYXdgXG4gICAgICAgIFNFTEVDVCBcbiAgICAgICAgICByYXRpbmcsXG4gICAgICAgICAgQ09VTlQoKikgYXMgY291bnQsXG4gICAgICAgICAgUk9VTkQoQ09VTlQoKikgKiAxMDAuMCAvIFNVTShDT1VOVCgqKSkgT1ZFUigpLCAxKSBhcyBwZXJjZW50YWdlXG4gICAgICAgIEZST00gcmF0aW5ncyBcbiAgICAgICAgV0hFUkUgbWF0Y2hfaWQgPSAke21hdGNoSWR9XG4gICAgICAgIEdST1VQIEJZIHJhdGluZ1xuICAgICAgICBPUkRFUiBCWSByYXRpbmcgREVTQ1xuICAgICAgYCBhcyBhbnlbXVxuXG4gICAgICAvLyAyLiBUb3RhbCBkZXMgY29tbWVudGFpcmVzIGF2ZWMgY29udGVudVxuICAgICAgY29uc3QgdG90YWxDb21tZW50cyA9IGF3YWl0IHByaXNtYS5yYXRpbmcuY291bnQoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIG1hdGNoSWQ6IG1hdGNoSWQgYXMgc3RyaW5nLFxuICAgICAgICAgIGNvbW1lbnQ6IHtcbiAgICAgICAgICAgIG5vdDogbnVsbCxcbiAgICAgICAgICAgIG5vdDogJydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vIDMuIFRvdGFsIGRlcyBsaWtlcyBzdXIgbGVzIHJldmlld3MgZGUgY2UgbWF0Y2hcbiAgICAgIGNvbnN0IHRvdGFsTGlrZXNSZXN1bHQgPSBhd2FpdCBwcmlzbWEuJHF1ZXJ5UmF3YFxuICAgICAgICBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWxcbiAgICAgICAgRlJPTSByZXZpZXdfbGlrZXMgcmxcbiAgICAgICAgSk9JTiByYXRpbmdzIHIgT04gcmwucmV2aWV3X2lkID0gci5pZFxuICAgICAgICBXSEVSRSByLm1hdGNoX2lkID0gJHttYXRjaElkfVxuICAgICAgYCBhcyBhbnlbXVxuXG4gICAgICAvLyA0LiBUb3AgcmV2aWV3ZXIgKHV0aWxpc2F0ZXVyIGF2ZWMgbGUgcGx1cyBkZSBsaWtlcyBzdXIgY2UgbWF0Y2gpXG4gICAgICBjb25zdCB0b3BSZXZpZXdlclJlc3VsdCA9IGF3YWl0IHByaXNtYS4kcXVlcnlSYXdgXG4gICAgICAgIFNFTEVDVCBcbiAgICAgICAgICB1LmlkLFxuICAgICAgICAgIHUubmFtZSxcbiAgICAgICAgICB1LnVzZXJuYW1lLFxuICAgICAgICAgIHUuaW1hZ2UsXG4gICAgICAgICAgQ09VTlQocmwuaWQpIGFzIGxpa2VzLFxuICAgICAgICAgIHIucmF0aW5nLFxuICAgICAgICAgIHIuY29tbWVudFxuICAgICAgICBGUk9NIHVzZXJzIHVcbiAgICAgICAgSk9JTiByYXRpbmdzIHIgT04gdS5pZCA9IHIudXNlcl9pZFxuICAgICAgICBMRUZUIEpPSU4gcmV2aWV3X2xpa2VzIHJsIE9OIHIuaWQgPSBybC5yZXZpZXdfaWRcbiAgICAgICAgV0hFUkUgci5tYXRjaF9pZCA9ICR7bWF0Y2hJZH0gXG4gICAgICAgICAgQU5EIHIuY29tbWVudCBJUyBOT1QgTlVMTCBcbiAgICAgICAgICBBTkQgci5jb21tZW50ICE9ICcnXG4gICAgICAgIEdST1VQIEJZIHUuaWQsIHUubmFtZSwgdS51c2VybmFtZSwgdS5pbWFnZSwgci5yYXRpbmcsIHIuY29tbWVudFxuICAgICAgICBPUkRFUiBCWSBsaWtlcyBERVNDLCByLnJhdGluZyBERVNDXG4gICAgICAgIExJTUlUIDFcbiAgICAgIGAgYXMgYW55W11cblxuICAgICAgLy8gNS4gQWN0aXZpdMOpIHLDqWNlbnRlIChyZXZpZXdzIGRlcyBkZXJuacOocmVzIDI0aClcbiAgICAgIGNvbnN0IHJlY2VudEFjdGl2aXR5ID0gYXdhaXQgcHJpc21hLnJhdGluZy5jb3VudCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgbWF0Y2hJZDogbWF0Y2hJZCBhcyBzdHJpbmcsXG4gICAgICAgICAgY29tbWVudDoge1xuICAgICAgICAgICAgbm90OiBudWxsLFxuICAgICAgICAgICAgbm90OiAnJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICBndGU6IG5ldyBEYXRlKERhdGUubm93KCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLy8gNi4gU3RhdGlzdGlxdWVzIHBhciBww6lyaW9kZSAocG91ciBsZSBncmFwaGlxdWUgZCdhY3Rpdml0w6kpXG4gICAgICBjb25zdCBhY3Rpdml0eUJ5SG91ciA9IGF3YWl0IHByaXNtYS4kcXVlcnlSYXdgXG4gICAgICAgIFNFTEVDVCBcbiAgICAgICAgICBFWFRSQUNUKEhPVVIgRlJPTSBjcmVhdGVkX2F0KSBhcyBob3VyLFxuICAgICAgICAgIENPVU5UKCopIGFzIGNvbW1lbnRzXG4gICAgICAgIEZST00gcmF0aW5nc1xuICAgICAgICBXSEVSRSBtYXRjaF9pZCA9ICR7bWF0Y2hJZH1cbiAgICAgICAgICBBTkQgY29tbWVudCBJUyBOT1QgTlVMTCBcbiAgICAgICAgICBBTkQgY29tbWVudCAhPSAnJ1xuICAgICAgICAgIEFORCBjcmVhdGVkX2F0ID49IE5PVygpIC0gSU5URVJWQUwgJzI0IGhvdXJzJ1xuICAgICAgICBHUk9VUCBCWSBFWFRSQUNUKEhPVVIgRlJPTSBjcmVhdGVkX2F0KVxuICAgICAgICBPUkRFUiBCWSBob3VyXG4gICAgICBgIGFzIGFueVtdXG5cbiAgICAgIC8vIDcuIE1vdHMtY2zDqXMgcG9wdWxhaXJlcyBkYW5zIGxlcyBjb21tZW50YWlyZXMgKHNpbXBsZSBhbmFseXNlKVxuICAgICAgY29uc3QgcG9wdWxhcldvcmRzID0gYXdhaXQgcHJpc21hLiRxdWVyeVJhd2BcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIHdvcmQsXG4gICAgICAgICAgQ09VTlQoKikgYXMgZnJlcXVlbmN5XG4gICAgICAgIEZST00gKFxuICAgICAgICAgIFNFTEVDVCBVTk5FU1QoXG4gICAgICAgICAgICBTVFJJTkdfVE9fQVJSQVkoXG4gICAgICAgICAgICAgIFJFR0VYUF9SRVBMQUNFKFxuICAgICAgICAgICAgICAgIExPV0VSKGNvbW1lbnQpLCBcbiAgICAgICAgICAgICAgICAnW15hLXrDocOgw6LDpMOpw6jDqsOrw6/DrsO0w7bDucO7w7zDp1xcc10nLCBcbiAgICAgICAgICAgICAgICAnJywgXG4gICAgICAgICAgICAgICAgJ2cnXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAnICdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIGFzIHdvcmRcbiAgICAgICAgICBGUk9NIHJhdGluZ3MgXG4gICAgICAgICAgV0hFUkUgbWF0Y2hfaWQgPSAke21hdGNoSWR9XG4gICAgICAgICAgICBBTkQgY29tbWVudCBJUyBOT1QgTlVMTCBcbiAgICAgICAgICAgIEFORCBjb21tZW50ICE9ICcnXG4gICAgICAgICkgd29yZHNcbiAgICAgICAgV0hFUkUgTEVOR1RIKHdvcmQpID4gM1xuICAgICAgICAgIEFORCB3b3JkIE5PVCBJTiAoJ2F2ZWMnLCAnZGFucycsICdwb3VyJywgJ2NldHRlJywgJ3BsdXMnLCAndHLDqHMnLCAndG91dCcsICdiaWVuJywgJ21haXMnLCAnY29tbWUnLCAnc2FucycsICdhbG9ycycpXG4gICAgICAgIEdST1VQIEJZIHdvcmRcbiAgICAgICAgSEFWSU5HIENPVU5UKCopID4gMVxuICAgICAgICBPUkRFUiBCWSBmcmVxdWVuY3kgREVTQ1xuICAgICAgICBMSU1JVCAxMFxuICAgICAgYCBhcyBhbnlbXVxuXG4gICAgICBjb25zdCBzdGF0cyA9IHtcbiAgICAgICAgcmF0aW5nRGlzdHJpYnV0aW9uOiByYXRpbmdEaXN0cmlidXRpb24ubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgICByYXRpbmc6IHBhcnNlSW50KGl0ZW0ucmF0aW5nKSxcbiAgICAgICAgICBjb3VudDogcGFyc2VJbnQoaXRlbS5jb3VudCksXG4gICAgICAgICAgcGVyY2VudGFnZTogcGFyc2VGbG9hdChpdGVtLnBlcmNlbnRhZ2UpXG4gICAgICAgIH0pKSxcbiAgICAgICAgdG90YWxDb21tZW50cyxcbiAgICAgICAgdG90YWxMaWtlczogcGFyc2VJbnQodG90YWxMaWtlc1Jlc3VsdFswXT8udG90YWwgfHwgJzAnKSxcbiAgICAgICAgdG9wUmV2aWV3ZXI6IHRvcFJldmlld2VyUmVzdWx0WzBdID8ge1xuICAgICAgICAgIGlkOiB0b3BSZXZpZXdlclJlc3VsdFswXS5pZCxcbiAgICAgICAgICBuYW1lOiB0b3BSZXZpZXdlclJlc3VsdFswXS5uYW1lLFxuICAgICAgICAgIHVzZXJuYW1lOiB0b3BSZXZpZXdlclJlc3VsdFswXS51c2VybmFtZSxcbiAgICAgICAgICBpbWFnZTogdG9wUmV2aWV3ZXJSZXN1bHRbMF0uaW1hZ2UsXG4gICAgICAgICAgbGlrZXM6IHBhcnNlSW50KHRvcFJldmlld2VyUmVzdWx0WzBdLmxpa2VzKSxcbiAgICAgICAgICByYXRpbmc6IHRvcFJldmlld2VyUmVzdWx0WzBdLnJhdGluZyxcbiAgICAgICAgICBjb21tZW50OiB0b3BSZXZpZXdlclJlc3VsdFswXS5jb21tZW50XG4gICAgICAgIH0gOiBudWxsLFxuICAgICAgICByZWNlbnRBY3Rpdml0eSxcbiAgICAgICAgYWN0aXZpdHlCeUhvdXI6IGFjdGl2aXR5QnlIb3VyLm1hcChpdGVtID0+ICh7XG4gICAgICAgICAgaG91cjogcGFyc2VJbnQoaXRlbS5ob3VyKSxcbiAgICAgICAgICBjb21tZW50czogcGFyc2VJbnQoaXRlbS5jb21tZW50cylcbiAgICAgICAgfSkpLFxuICAgICAgICBwb3B1bGFyV29yZHM6IHBvcHVsYXJXb3Jkcy5tYXAoaXRlbSA9PiAoe1xuICAgICAgICAgIHdvcmQ6IGl0ZW0ud29yZCxcbiAgICAgICAgICBmcmVxdWVuY3k6IHBhcnNlSW50KGl0ZW0uZnJlcXVlbmN5KVxuICAgICAgICB9KSksXG4gICAgICAgIC8vIFF1ZWxxdWVzIG3DqXRyaXF1ZXMgY2FsY3Vsw6llc1xuICAgICAgICBhdmdSYXRpbmc6IHJhdGluZ0Rpc3RyaWJ1dGlvbi5sZW5ndGggPiAwIFxuICAgICAgICAgID8gcmF0aW5nRGlzdHJpYnV0aW9uLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyAocGFyc2VJbnQoaXRlbS5yYXRpbmcpICogcGFyc2VJbnQoaXRlbS5jb3VudCkpLCAwKSAvIFxuICAgICAgICAgICAgcmF0aW5nRGlzdHJpYnV0aW9uLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyBwYXJzZUludChpdGVtLmNvdW50KSwgMClcbiAgICAgICAgICA6IDAsXG4gICAgICAgIGVuZ2FnZW1lbnRSYXRlOiB0b3RhbENvbW1lbnRzID4gMCBcbiAgICAgICAgICA/ICgocGFyc2VJbnQodG90YWxMaWtlc1Jlc3VsdFswXT8udG90YWwgfHwgJzAnKSArIHJlY2VudEFjdGl2aXR5KSAvIHRvdGFsQ29tbWVudHMgKiAxMDApLnRvRml4ZWQoMSlcbiAgICAgICAgICA6IDBcbiAgICAgIH1cblxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBzdGF0c1xuICAgICAgfSlcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgc3RhdHMgY29tbXVuYXV0w6k6JywgZXJyb3IpXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRXJyZXVyIHNlcnZldXInIH0pXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnXSlcbiAgICByZXMuc3RhdHVzKDQwNSkuZW5kKGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGApXG4gIH1cbn0iXSwibmFtZXMiOlsicHJpc21hIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsIm1hdGNoSWQiLCJxdWVyeSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInJhdGluZ0Rpc3RyaWJ1dGlvbiIsIiRxdWVyeVJhdyIsInRvdGFsQ29tbWVudHMiLCJyYXRpbmciLCJjb3VudCIsIndoZXJlIiwiY29tbWVudCIsIm5vdCIsInRvdGFsTGlrZXNSZXN1bHQiLCJ0b3BSZXZpZXdlclJlc3VsdCIsInJlY2VudEFjdGl2aXR5IiwiY3JlYXRlZEF0IiwiZ3RlIiwiRGF0ZSIsIm5vdyIsImFjdGl2aXR5QnlIb3VyIiwicG9wdWxhcldvcmRzIiwic3RhdHMiLCJtYXAiLCJpdGVtIiwicGFyc2VJbnQiLCJwZXJjZW50YWdlIiwicGFyc2VGbG9hdCIsInRvdGFsTGlrZXMiLCJ0b3RhbCIsInRvcFJldmlld2VyIiwiaWQiLCJuYW1lIiwidXNlcm5hbWUiLCJpbWFnZSIsImxpa2VzIiwiaG91ciIsImNvbW1lbnRzIiwid29yZCIsImZyZXF1ZW5jeSIsImF2Z1JhdGluZyIsImxlbmd0aCIsInJlZHVjZSIsInN1bSIsImVuZ2FnZW1lbnRSYXRlIiwidG9GaXhlZCIsInN1Y2Nlc3MiLCJjb25zb2xlIiwic2V0SGVhZGVyIiwiZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/match-community-stats.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmatch-community-stats&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmatch-community-stats.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();