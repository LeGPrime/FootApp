"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/video-suggestions/[matchId]";
exports.ids = ["pages/api/video-suggestions/[matchId]"];
exports.modules = {

/***/ "@next-auth/prisma-adapter":
/*!********************************************!*\
  !*** external "@next-auth/prisma-adapter" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/prisma-adapter");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/providers/github":
/*!*********************************************!*\
  !*** external "next-auth/providers/github" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/github");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideo-suggestions%2F%5BmatchId%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fvideo-suggestions%2F%5BmatchId%5D.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideo-suggestions%2F%5BmatchId%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fvideo-suggestions%2F%5BmatchId%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_video_suggestions_matchId_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/video-suggestions/[matchId].ts */ \"(api)/./pages/api/video-suggestions/[matchId].ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_video_suggestions_matchId_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_video_suggestions_matchId_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/video-suggestions/[matchId]\",\n        pathname: \"/api/video-suggestions/[matchId]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_video_suggestions_matchId_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnZpZGVvLXN1Z2dlc3Rpb25zJTJGJTVCbWF0Y2hJZCU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGdmlkZW8tc3VnZ2VzdGlvbnMlMkYlNUJtYXRjaElkJTVELnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3VFO0FBQ3ZFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxvRUFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsb0VBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9vdHJhdGUvPzc0YjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS92aWRlby1zdWdnZXN0aW9ucy9bbWF0Y2hJZF0udHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92aWRlby1zdWdnZXN0aW9ucy9bbWF0Y2hJZF1cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS92aWRlby1zdWdnZXN0aW9ucy9bbWF0Y2hJZF1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideo-suggestions%2F%5BmatchId%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fvideo-suggestions%2F%5BmatchId%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"@next-auth/prisma-adapter\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/github */ \"next-auth/providers/github\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./prisma */ \"(api)/./lib/prisma.ts\");\n\n\n\n\n\nconst authOptions = {\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__.PrismaAdapter)(_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma),\n    providers: [\n        next_auth_providers_github__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.GITHUB_ID,\n            clientSecret: process.env.GITHUB_SECRET\n        }),\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2___default()({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Mot de passe\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                const user = await _prisma__WEBPACK_IMPORTED_MODULE_4__.prisma.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    }\n                });\n                if (!user || !user.password) {\n                    return null;\n                }\n                const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_3___default().compare(credentials.password, user.password);\n                if (!isPasswordValid) {\n                    return null;\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    username: user.username\n                };\n            }\n        })\n    ],\n    callbacks: {\n        session: async ({ session, token })=>{\n            if (session?.user) {\n                session.user.id = token.sub;\n            }\n            return session;\n        },\n        jwt: async ({ user, token })=>{\n            if (user) {\n                token.uid = user.id;\n            }\n            return token;\n        }\n    },\n    session: {\n        strategy: \"jwt\"\n    },\n    pages: {\n        signIn: \"/auth/signin\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQ3lEO0FBQ0Y7QUFDVTtBQUNwQztBQUNJO0FBRTFCLE1BQU1LLGNBQStCO0lBQzFDQyxTQUFTTix3RUFBYUEsQ0FBQ0ksMkNBQU1BO0lBQzdCRyxXQUFXO1FBQ1ROLGlFQUFjQSxDQUFDO1lBQ2JPLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsU0FBUztZQUMvQkMsY0FBY0gsUUFBUUMsR0FBRyxDQUFDRyxhQUFhO1FBQ3pDO1FBQ0FYLHNFQUFtQkEsQ0FBQztZQUNsQlksTUFBTTtZQUNOQyxhQUFhO2dCQUNYQyxPQUFPO29CQUFFQyxPQUFPO29CQUFTQyxNQUFNO2dCQUFRO2dCQUN2Q0MsVUFBVTtvQkFBRUYsT0FBTztvQkFBZ0JDLE1BQU07Z0JBQVc7WUFDdEQ7WUFDQSxNQUFNRSxXQUFVTCxXQUFXO2dCQUN6QixJQUFJLENBQUNBLGFBQWFDLFNBQVMsQ0FBQ0QsYUFBYUksVUFBVTtvQkFDakQsT0FBTztnQkFDVDtnQkFFQSxNQUFNRSxPQUFPLE1BQU1qQiwyQ0FBTUEsQ0FBQ2lCLElBQUksQ0FBQ0MsVUFBVSxDQUFDO29CQUN4Q0MsT0FBTzt3QkFDTFAsT0FBT0QsWUFBWUMsS0FBSztvQkFDMUI7Z0JBQ0Y7Z0JBRUEsSUFBSSxDQUFDSyxRQUFRLENBQUNBLEtBQUtGLFFBQVEsRUFBRTtvQkFDM0IsT0FBTztnQkFDVDtnQkFFQSxNQUFNSyxrQkFBa0IsTUFBTXJCLHVEQUFjLENBQzFDWSxZQUFZSSxRQUFRLEVBQ3BCRSxLQUFLRixRQUFRO2dCQUdmLElBQUksQ0FBQ0ssaUJBQWlCO29CQUNwQixPQUFPO2dCQUNUO2dCQUVBLE9BQU87b0JBQ0xFLElBQUlMLEtBQUtLLEVBQUU7b0JBQ1hWLE9BQU9LLEtBQUtMLEtBQUs7b0JBQ2pCRixNQUFNTyxLQUFLUCxJQUFJO29CQUNmYSxVQUFVTixLQUFLTSxRQUFRO2dCQUN6QjtZQUNGO1FBQ0Y7S0FDRDtJQUNEQyxXQUFXO1FBQ1RDLFNBQVMsT0FBTyxFQUFFQSxPQUFPLEVBQUVDLEtBQUssRUFBRTtZQUNoQyxJQUFJRCxTQUFTUixNQUFNO2dCQUNqQlEsUUFBUVIsSUFBSSxDQUFDSyxFQUFFLEdBQUdJLE1BQU1DLEdBQUc7WUFDN0I7WUFDQSxPQUFPRjtRQUNUO1FBQ0FHLEtBQUssT0FBTyxFQUFFWCxJQUFJLEVBQUVTLEtBQUssRUFBRTtZQUN6QixJQUFJVCxNQUFNO2dCQUNSUyxNQUFNRyxHQUFHLEdBQUdaLEtBQUtLLEVBQUU7WUFDckI7WUFDQSxPQUFPSTtRQUNUO0lBQ0Y7SUFDQUQsU0FBUztRQUNQSyxVQUFVO0lBQ1o7SUFDQUMsT0FBTztRQUNMQyxRQUFRO0lBQ1Y7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9vdHJhdGUvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gXCJuZXh0LWF1dGhcIlxuaW1wb3J0IHsgUHJpc21hQWRhcHRlciB9IGZyb20gXCJAbmV4dC1hdXRoL3ByaXNtYS1hZGFwdGVyXCJcbmltcG9ydCBHaXRodWJQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9naXRodWJcIlxuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHNcIlxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIi4vcHJpc21hXCJcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIGFkYXB0ZXI6IFByaXNtYUFkYXB0ZXIocHJpc21hKSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgR2l0aHViUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdJVEhVQl9JRCEsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdJVEhVQl9TRUNSRVQhLFxuICAgIH0pLFxuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogXCJjcmVkZW50aWFsc1wiLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwiRW1haWxcIiwgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIk1vdCBkZSBwYXNzZVwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzPy5lbWFpbCB8fCAhY3JlZGVudGlhbHM/LnBhc3N3b3JkKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICghdXNlciB8fCAhdXNlci5wYXNzd29yZCkge1xuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShcbiAgICAgICAgICBjcmVkZW50aWFscy5wYXNzd29yZCxcbiAgICAgICAgICB1c2VyLnBhc3N3b3JkXG4gICAgICAgIClcblxuICAgICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIF0sXG4gIGNhbGxiYWNrczoge1xuICAgIHNlc3Npb246IGFzeW5jICh7IHNlc3Npb24sIHRva2VuIH0pID0+IHtcbiAgICAgIGlmIChzZXNzaW9uPy51c2VyKSB7XG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLnN1YiFcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uXG4gICAgfSxcbiAgICBqd3Q6IGFzeW5jICh7IHVzZXIsIHRva2VuIH0pID0+IHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLnVpZCA9IHVzZXIuaWRcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlblxuICAgIH0sXG4gIH0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogJ2p3dCcsXG4gIH0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcbiAgfSxcbn1cbiJdLCJuYW1lcyI6WyJQcmlzbWFBZGFwdGVyIiwiR2l0aHViUHJvdmlkZXIiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYmNyeXB0IiwicHJpc21hIiwiYXV0aE9wdGlvbnMiLCJhZGFwdGVyIiwicHJvdmlkZXJzIiwiY2xpZW50SWQiLCJwcm9jZXNzIiwiZW52IiwiR0lUSFVCX0lEIiwiY2xpZW50U2VjcmV0IiwiR0lUSFVCX1NFQ1JFVCIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaXNQYXNzd29yZFZhbGlkIiwiY29tcGFyZSIsImlkIiwidXNlcm5hbWUiLCJjYWxsYmFja3MiLCJzZXNzaW9uIiwidG9rZW4iLCJzdWIiLCJqd3QiLCJ1aWQiLCJzdHJhdGVneSIsInBhZ2VzIiwic2lnbkluIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/auth.ts\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFFO0FBRWxFLElBQUlJLElBQXlCLEVBQWNILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zvb3RyYXRlLy4vbGliL3ByaXNtYS50cz85ODIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxufVxuXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KClcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/video-suggestions/[matchId].ts":
/*!**************************************************!*\
  !*** ./pages/api/video-suggestions/[matchId].ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/auth */ \"(api)/./lib/auth.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n// pages/api/video-suggestions/[matchId].ts\n\n\n\nasync function handler(req, res) {\n    const { matchId } = req.query;\n    if (req.method === \"GET\") {\n        // Récupérer toutes les suggestions pour un match\n        return handleGetSuggestions(req, res, matchId);\n    }\n    if (req.method === \"POST\") {\n        // Créer une nouvelle suggestion\n        return handleCreateSuggestion(req, res, matchId);\n    }\n    return res.status(405).json({\n        error: \"Method not allowed\"\n    });\n}\n// GET - Récupérer les suggestions\nasync function handleGetSuggestions(req, res, matchId) {\n    try {\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _lib_auth__WEBPACK_IMPORTED_MODULE_1__.authOptions);\n        const currentUserId = session?.user?.id;\n        // Récupérer les suggestions avec votes et infos utilisateur\n        const suggestions = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.videoSuggestion.findMany({\n            where: {\n                matchId,\n                isBlocked: false // Ne pas afficher les suggestions bloquées\n            },\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        name: true,\n                        username: true,\n                        image: true\n                    }\n                },\n                votes: {\n                    select: {\n                        userId: true,\n                        voteType: true\n                    }\n                },\n                reports: {\n                    where: {\n                        isResolved: false\n                    },\n                    select: {\n                        id: true\n                    }\n                },\n                _count: {\n                    select: {\n                        votes: true,\n                        reports: true\n                    }\n                }\n            },\n            orderBy: [\n                {\n                    isVerified: \"desc\"\n                },\n                {\n                    createdAt: \"desc\"\n                } // Plus récentes ensuite\n            ]\n        });\n        // Formater les données avec calcul des votes\n        const formattedSuggestions = suggestions.map((suggestion)=>{\n            const upvotes = suggestion.votes.filter((v)=>v.voteType === \"up\").length;\n            const downvotes = suggestion.votes.filter((v)=>v.voteType === \"down\").length;\n            const userVote = currentUserId ? suggestion.votes.find((v)=>v.userId === currentUserId)?.voteType || null : null;\n            return {\n                id: suggestion.id,\n                matchId: suggestion.matchId,\n                url: suggestion.url,\n                title: suggestion.title,\n                description: suggestion.description,\n                platform: suggestion.platform,\n                suggestedBy: {\n                    id: suggestion.user.id,\n                    name: suggestion.user.name || suggestion.user.username || \"Utilisateur\",\n                    username: suggestion.user.username || \"user\",\n                    image: suggestion.user.image\n                },\n                votes: {\n                    upvotes,\n                    downvotes,\n                    userVote: userVote\n                },\n                createdAt: suggestion.createdAt.toISOString(),\n                isVerified: suggestion.isVerified,\n                reportsCount: suggestion.reports.length\n            };\n        });\n        // Trier par score (upvotes - downvotes)\n        const sortedSuggestions = formattedSuggestions.sort((a, b)=>{\n            const scoreA = a.votes.upvotes - a.votes.downvotes;\n            const scoreB = b.votes.upvotes - b.votes.downvotes;\n            // Vérifiées en premier, puis par score, puis par date\n            if (a.isVerified && !b.isVerified) return -1;\n            if (!a.isVerified && b.isVerified) return 1;\n            if (scoreA !== scoreB) return scoreB - scoreA;\n            return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n        });\n        res.status(200).json({\n            success: true,\n            suggestions: sortedSuggestions\n        });\n    } catch (error) {\n        console.error(\"❌ Erreur GET suggestions:\", error);\n        res.status(500).json({\n            success: false,\n            error: \"Failed to fetch suggestions\"\n        });\n    }\n}\n// POST - Créer une nouvelle suggestion\nasync function handleCreateSuggestion(req, res, matchId) {\n    const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _lib_auth__WEBPACK_IMPORTED_MODULE_1__.authOptions);\n    if (!session?.user?.id) {\n        return res.status(401).json({\n            error: \"Connexion requise\"\n        });\n    }\n    try {\n        const { url, title, description } = req.body;\n        // Validation basique\n        if (!url || !url.trim()) {\n            return res.status(400).json({\n                error: \"URL requise\"\n            });\n        }\n        if (!isValidVideoUrl(url)) {\n            return res.status(400).json({\n                error: \"URL non support\\xe9e\"\n            });\n        }\n        // Vérifier si le match existe\n        const match = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.match.findUnique({\n            where: {\n                id: matchId\n            }\n        });\n        if (!match) {\n            return res.status(404).json({\n                error: \"Match non trouv\\xe9\"\n            });\n        }\n        // Détecter la plateforme\n        const platform = detectPlatform(url);\n        // Vérifier les doublons\n        const existing = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.videoSuggestion.findFirst({\n            where: {\n                matchId,\n                url: url.trim()\n            }\n        });\n        if (existing) {\n            return res.status(400).json({\n                error: \"Cette vid\\xe9o a d\\xe9j\\xe0 \\xe9t\\xe9 sugg\\xe9r\\xe9e\"\n            });\n        }\n        // Limite de suggestions par utilisateur par match (anti-spam)\n        const userSuggestions = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.videoSuggestion.count({\n            where: {\n                matchId,\n                userId: session.user.id\n            }\n        });\n        if (userSuggestions >= 3) {\n            return res.status(400).json({\n                error: \"Limite de 3 suggestions par match atteinte\"\n            });\n        }\n        // Créer la suggestion\n        const suggestion = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.videoSuggestion.create({\n            data: {\n                matchId,\n                userId: session.user.id,\n                url: url.trim(),\n                title: title?.trim() || extractTitleFromUrl(url),\n                description: description?.trim() || null,\n                platform\n            },\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        name: true,\n                        username: true,\n                        image: true\n                    }\n                }\n            }\n        });\n        console.log(`✅ Nouvelle suggestion créée: ${suggestion.title} par ${suggestion.user.name}`);\n        res.status(201).json({\n            success: true,\n            suggestion: {\n                id: suggestion.id,\n                matchId: suggestion.matchId,\n                url: suggestion.url,\n                title: suggestion.title,\n                description: suggestion.description,\n                platform: suggestion.platform,\n                suggestedBy: {\n                    id: suggestion.user.id,\n                    name: suggestion.user.name || suggestion.user.username || \"Utilisateur\",\n                    username: suggestion.user.username || \"user\"\n                },\n                votes: {\n                    upvotes: 0,\n                    downvotes: 0,\n                    userVote: null\n                },\n                createdAt: suggestion.createdAt.toISOString(),\n                isVerified: false\n            }\n        });\n    } catch (error) {\n        console.error(\"❌ Erreur cr\\xe9ation suggestion:\", error);\n        res.status(500).json({\n            success: false,\n            error: \"Failed to create suggestion\"\n        });\n    }\n}\n// Fonctions utilitaires\nfunction isValidVideoUrl(url) {\n    const validDomains = [\n        \"youtube.com\",\n        \"youtu.be\",\n        \"m.youtube.com\",\n        \"dailymotion.com\",\n        \"dai.ly\",\n        \"twitch.tv\",\n        \"clips.twitch.tv\",\n        \"vimeo.com\",\n        \"streamable.com\"\n    ];\n    try {\n        const urlObj = new URL(url);\n        return validDomains.some((domain)=>urlObj.hostname.includes(domain));\n    } catch  {\n        return false;\n    }\n}\nfunction detectPlatform(url) {\n    if (url.includes(\"youtube.com\") || url.includes(\"youtu.be\")) return \"youtube\";\n    if (url.includes(\"dailymotion.com\") || url.includes(\"dai.ly\")) return \"dailymotion\";\n    if (url.includes(\"twitch.tv\")) return \"twitch\";\n    if (url.includes(\"vimeo.com\")) return \"vimeo\";\n    return \"other\";\n}\nfunction extractTitleFromUrl(url) {\n    try {\n        const urlObj = new URL(url);\n        if (urlObj.hostname.includes(\"youtube\")) {\n            const videoId = urlObj.searchParams.get(\"v\") || urlObj.pathname.split(\"/\").pop();\n            return `Vidéo YouTube ${videoId}`;\n        }\n        return `Vidéo ${urlObj.hostname}`;\n    } catch  {\n        return \"Nouvelle vid\\xe9o\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdmlkZW8tc3VnZ2VzdGlvbnMvW21hdGNoSWRdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsMkNBQTJDO0FBRU07QUFDRjtBQUNIO0FBRTdCLGVBQWVHLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUdGLElBQUlHLEtBQUs7SUFFN0IsSUFBSUgsSUFBSUksTUFBTSxLQUFLLE9BQU87UUFDeEIsaURBQWlEO1FBQ2pELE9BQU9DLHFCQUFxQkwsS0FBS0MsS0FBS0M7SUFDeEM7SUFFQSxJQUFJRixJQUFJSSxNQUFNLEtBQUssUUFBUTtRQUN6QixnQ0FBZ0M7UUFDaEMsT0FBT0UsdUJBQXVCTixLQUFLQyxLQUFLQztJQUMxQztJQUVBLE9BQU9ELElBQUlNLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7UUFBRUMsT0FBTztJQUFxQjtBQUM1RDtBQUVBLGtDQUFrQztBQUNsQyxlQUFlSixxQkFBcUJMLEdBQW1CLEVBQUVDLEdBQW9CLEVBQUVDLE9BQWU7SUFDNUYsSUFBSTtRQUNGLE1BQU1RLFVBQVUsTUFBTWQsZ0VBQWdCQSxDQUFDSSxLQUFLQyxLQUFLSixrREFBV0E7UUFDNUQsTUFBTWMsZ0JBQWdCRCxTQUFTRSxNQUFNQztRQUVyQyw0REFBNEQ7UUFDNUQsTUFBTUMsY0FBYyxNQUFNaEIsK0NBQU1BLENBQUNpQixlQUFlLENBQUNDLFFBQVEsQ0FBQztZQUN4REMsT0FBTztnQkFDTGY7Z0JBQ0FnQixXQUFXLE1BQU0sMkNBQTJDO1lBQzlEO1lBQ0FDLFNBQVM7Z0JBQ1BQLE1BQU07b0JBQ0pRLFFBQVE7d0JBQUVQLElBQUk7d0JBQU1RLE1BQU07d0JBQU1DLFVBQVU7d0JBQU1DLE9BQU87b0JBQUs7Z0JBQzlEO2dCQUNBQyxPQUFPO29CQUNMSixRQUFRO3dCQUFFSyxRQUFRO3dCQUFNQyxVQUFVO29CQUFLO2dCQUN6QztnQkFDQUMsU0FBUztvQkFDUFYsT0FBTzt3QkFBRVcs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LGNBQWMsT0FBTztJQUN0QyxPQUFPO0FBQ1Q7QUFFQSxTQUFTUixvQkFBb0I3QixHQUFXO0lBQ3RDLElBQUk7UUFDRixNQUFNZ0MsU0FBUyxJQUFJQyxJQUFJakM7UUFDdkIsSUFBSWdDLE9BQU9JLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDLFlBQVk7WUFDdkMsTUFBTUMsVUFBVU4sT0FBT08sWUFBWSxDQUFDQyxHQUFHLENBQUMsUUFBUVIsT0FBT1MsUUFBUSxDQUFDQyxLQUFLLENBQUMsS0FBS0MsR0FBRztZQUM5RSxPQUFPLENBQUMsY0FBYyxFQUFFTCxRQUFRLENBQUM7UUFDbkM7UUFDQSxPQUFPLENBQUMsTUFBTSxFQUFFTixPQUFPSSxRQUFRLENBQUMsQ0FBQztJQUNuQyxFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Zvb3RyYXRlLy4vcGFnZXMvYXBpL3ZpZGVvLXN1Z2dlc3Rpb25zL1ttYXRjaElkXS50cz9jZWJjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS92aWRlby1zdWdnZXN0aW9ucy9bbWF0Y2hJZF0udHNcbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aC9uZXh0J1xuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9saWIvYXV0aCdcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4uLy4uLy4uL2xpYi9wcmlzbWEnXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgY29uc3QgeyBtYXRjaElkIH0gPSByZXEucXVlcnlcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAvLyBSw6ljdXDDqXJlciB0b3V0ZXMgbGVzIHN1Z2dlc3Rpb25zIHBvdXIgdW4gbWF0Y2hcbiAgICByZXR1cm4gaGFuZGxlR2V0U3VnZ2VzdGlvbnMocmVxLCByZXMsIG1hdGNoSWQgYXMgc3RyaW5nKVxuICB9IFxuICBcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xuICAgIC8vIENyw6llciB1bmUgbm91dmVsbGUgc3VnZ2VzdGlvblxuICAgIHJldHVybiBoYW5kbGVDcmVhdGVTdWdnZXN0aW9uKHJlcSwgcmVzLCBtYXRjaElkIGFzIHN0cmluZylcbiAgfVxuXG4gIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KVxufVxuXG4vLyBHRVQgLSBSw6ljdXDDqXJlciBsZXMgc3VnZ2VzdGlvbnNcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUdldFN1Z2dlc3Rpb25zKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlLCBtYXRjaElkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcywgYXV0aE9wdGlvbnMpXG4gICAgY29uc3QgY3VycmVudFVzZXJJZCA9IHNlc3Npb24/LnVzZXI/LmlkXG5cbiAgICAvLyBSw6ljdXDDqXJlciBsZXMgc3VnZ2VzdGlvbnMgYXZlYyB2b3RlcyBldCBpbmZvcyB1dGlsaXNhdGV1clxuICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gYXdhaXQgcHJpc21hLnZpZGVvU3VnZ2VzdGlvbi5maW5kTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBtYXRjaElkLFxuICAgICAgICBpc0Jsb2NrZWQ6IGZhbHNlIC8vIE5lIHBhcyBhZmZpY2hlciBsZXMgc3VnZ2VzdGlvbnMgYmxvcXXDqWVzXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCB1c2VybmFtZTogdHJ1ZSwgaW1hZ2U6IHRydWUgfVxuICAgICAgICB9LFxuICAgICAgICB2b3Rlczoge1xuICAgICAgICAgIHNlbGVjdDogeyB1c2VySWQ6IHRydWUsIHZvdGVUeXBlOiB0cnVlIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVwb3J0czoge1xuICAgICAgICAgIHdoZXJlOiB7IGlzUmVzb2x2ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICB2b3RlczogdHJ1ZSxcbiAgICAgICAgICAgIHJlcG9ydHM6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiBbXG4gICAgICAgIHsgaXNWZXJpZmllZDogJ2Rlc2MnIH0sIC8vIFbDqXJpZmnDqWVzIGVuIHByZW1pZXJcbiAgICAgICAgeyBjcmVhdGVkQXQ6ICdkZXNjJyB9ICAgLy8gUGx1cyByw6ljZW50ZXMgZW5zdWl0ZVxuICAgICAgXVxuICAgIH0pXG5cbiAgICAvLyBGb3JtYXRlciBsZXMgZG9ubsOpZXMgYXZlYyBjYWxjdWwgZGVzIHZvdGVzXG4gICAgY29uc3QgZm9ybWF0dGVkU3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucy5tYXAoc3VnZ2VzdGlvbiA9PiB7XG4gICAgICBjb25zdCB1cHZvdGVzID0gc3VnZ2VzdGlvbi52b3Rlcy5maWx0ZXIodiA9PiB2LnZvdGVUeXBlID09PSAndXAnKS5sZW5ndGhcbiAgICAgIGNvbnN0IGRvd252b3RlcyA9IHN1Z2dlc3Rpb24udm90ZXMuZmlsdGVyKHYgPT4gdi52b3RlVHlwZSA9PT0gJ2Rvd24nKS5sZW5ndGhcbiAgICAgIGNvbnN0IHVzZXJWb3RlID0gY3VycmVudFVzZXJJZCA/IFxuICAgICAgICBzdWdnZXN0aW9uLnZvdGVzLmZpbmQodiA9PiB2LnVzZXJJZCA9PT0gY3VycmVudFVzZXJJZCk/LnZvdGVUeXBlIHx8IG51bGwgOiBudWxsXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBzdWdnZXN0aW9uLmlkLFxuICAgICAgICBtYXRjaElkOiBzdWdnZXN0aW9uLm1hdGNoSWQsXG4gICAgICAgIHVybDogc3VnZ2VzdGlvbi51cmwsXG4gICAgICAgIHRpdGxlOiBzdWdnZXN0aW9uLnRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbjogc3VnZ2VzdGlvbi5kZXNjcmlwdGlvbixcbiAgICAgICAgcGxhdGZvcm06IHN1Z2dlc3Rpb24ucGxhdGZvcm0sXG4gICAgICAgIHN1Z2dlc3RlZEJ5OiB7XG4gICAgICAgICAgaWQ6IHN1Z2dlc3Rpb24udXNlci5pZCxcbiAgICAgICAgICBuYW1lOiBzdWdnZXN0aW9uLnVzZXIubmFtZSB8fCBzdWdnZXN0aW9uLnVzZXIudXNlcm5hbWUgfHwgJ1V0aWxpc2F0ZXVyJyxcbiAgICAgICAgICB1c2VybmFtZTogc3VnZ2VzdGlvbi51c2VyLnVzZXJuYW1lIHx8ICd1c2VyJyxcbiAgICAgICAgICBpbWFnZTogc3VnZ2VzdGlvbi51c2VyLmltYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHZvdGVzOiB7XG4gICAgICAgICAgdXB2b3RlcyxcbiAgICAgICAgICBkb3dudm90ZXMsXG4gICAgICAgICAgdXNlclZvdGU6IHVzZXJWb3RlIGFzICd1cCcgfCAnZG93bicgfCBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZWRBdDogc3VnZ2VzdGlvbi5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSxcbiAgICAgICAgaXNWZXJpZmllZDogc3VnZ2VzdGlvbi5pc1ZlcmlmaWVkLFxuICAgICAgICByZXBvcnRzQ291bnQ6IHN1Z2dlc3Rpb24ucmVwb3J0cy5sZW5ndGhcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gVHJpZXIgcGFyIHNjb3JlICh1cHZvdGVzIC0gZG93bnZvdGVzKVxuICAgIGNvbnN0IHNvcnRlZFN1Z2dlc3Rpb25zID0gZm9ybWF0dGVkU3VnZ2VzdGlvbnMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3Qgc2NvcmVBID0gYS52b3Rlcy51cHZvdGVzIC0gYS52b3Rlcy5kb3dudm90ZXNcbiAgICAgIGNvbnN0IHNjb3JlQiA9IGIudm90ZXMudXB2b3RlcyAtIGIudm90ZXMuZG93bnZvdGVzXG4gICAgICBcbiAgICAgIC8vIFbDqXJpZmnDqWVzIGVuIHByZW1pZXIsIHB1aXMgcGFyIHNjb3JlLCBwdWlzIHBhciBkYXRlXG4gICAgICBpZiAoYS5pc1ZlcmlmaWVkICYmICFiLmlzVmVyaWZpZWQpIHJldHVybiAtMVxuICAgICAgaWYgKCFhLmlzVmVyaWZpZWQgJiYgYi5pc1ZlcmlmaWVkKSByZXR1cm4gMVxuICAgICAgaWYgKHNjb3JlQSAhPT0gc2NvcmVCKSByZXR1cm4gc2NvcmVCIC0gc2NvcmVBXG4gICAgICByZXR1cm4gbmV3IERhdGUoYi5jcmVhdGVkQXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuY3JlYXRlZEF0KS5nZXRUaW1lKClcbiAgICB9KVxuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHN1Z2dlc3Rpb25zOiBzb3J0ZWRTdWdnZXN0aW9uc1xuICAgIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyZXVyIEdFVCBzdWdnZXN0aW9uczonLCBlcnJvcilcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHN1Z2dlc3Rpb25zJ1xuICAgIH0pXG4gIH1cbn1cblxuLy8gUE9TVCAtIENyw6llciB1bmUgbm91dmVsbGUgc3VnZ2VzdGlvblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ3JlYXRlU3VnZ2VzdGlvbihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSwgbWF0Y2hJZDogc3RyaW5nKSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzLCBhdXRoT3B0aW9ucylcbiAgXG4gIGlmICghc2Vzc2lvbj8udXNlcj8uaWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0Nvbm5leGlvbiByZXF1aXNlJyB9KVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVybCwgdGl0bGUsIGRlc2NyaXB0aW9uIH0gPSByZXEuYm9keVxuXG4gICAgLy8gVmFsaWRhdGlvbiBiYXNpcXVlXG4gICAgaWYgKCF1cmwgfHwgIXVybC50cmltKCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVVJMIHJlcXVpc2UnIH0pXG4gICAgfVxuXG4gICAgaWYgKCFpc1ZhbGlkVmlkZW9VcmwodXJsKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdVUkwgbm9uIHN1cHBvcnTDqWUnIH0pXG4gICAgfVxuXG4gICAgLy8gVsOpcmlmaWVyIHNpIGxlIG1hdGNoIGV4aXN0ZVxuICAgIGNvbnN0IG1hdGNoID0gYXdhaXQgcHJpc21hLm1hdGNoLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IG1hdGNoSWQgfVxuICAgIH0pXG5cbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ01hdGNoIG5vbiB0cm91dsOpJyB9KVxuICAgIH1cblxuICAgIC8vIETDqXRlY3RlciBsYSBwbGF0ZWZvcm1lXG4gICAgY29uc3QgcGxhdGZvcm0gPSBkZXRlY3RQbGF0Zm9ybSh1cmwpXG5cbiAgICAvLyBWw6lyaWZpZXIgbGVzIGRvdWJsb25zXG4gICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEudmlkZW9TdWdnZXN0aW9uLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBtYXRjaElkLFxuICAgICAgICB1cmw6IHVybC50cmltKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0NldHRlIHZpZMOpbyBhIGTDqWrDoCDDqXTDqSBzdWdnw6lyw6llJyB9KVxuICAgIH1cblxuICAgIC8vIExpbWl0ZSBkZSBzdWdnZXN0aW9ucyBwYXIgdXRpbGlzYXRldXIgcGFyIG1hdGNoIChhbnRpLXNwYW0pXG4gICAgY29uc3QgdXNlclN1Z2dlc3Rpb25zID0gYXdhaXQgcHJpc21hLnZpZGVvU3VnZ2VzdGlvbi5jb3VudCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBtYXRjaElkLFxuICAgICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pZFxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAodXNlclN1Z2dlc3Rpb25zID49IDMpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTGltaXRlIGRlIDMgc3VnZ2VzdGlvbnMgcGFyIG1hdGNoIGF0dGVpbnRlJyB9KVxuICAgIH1cblxuICAgIC8vIENyw6llciBsYSBzdWdnZXN0aW9uXG4gICAgY29uc3Qgc3VnZ2VzdGlvbiA9IGF3YWl0IHByaXNtYS52aWRlb1N1Z2dlc3Rpb24uY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbWF0Y2hJZCxcbiAgICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgIHVybDogdXJsLnRyaW0oKSxcbiAgICAgICAgdGl0bGU6IHRpdGxlPy50cmltKCkgfHwgZXh0cmFjdFRpdGxlRnJvbVVybCh1cmwpLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24/LnRyaW0oKSB8fCBudWxsLFxuICAgICAgICBwbGF0Zm9ybVxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdXNlcm5hbWU6IHRydWUsIGltYWdlOiB0cnVlIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zb2xlLmxvZyhg4pyFIE5vdXZlbGxlIHN1Z2dlc3Rpb24gY3LDqcOpZTogJHtzdWdnZXN0aW9uLnRpdGxlfSBwYXIgJHtzdWdnZXN0aW9uLnVzZXIubmFtZX1gKVxuXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHN1Z2dlc3Rpb246IHtcbiAgICAgICAgaWQ6IHN1Z2dlc3Rpb24uaWQsXG4gICAgICAgIG1hdGNoSWQ6IHN1Z2dlc3Rpb24ubWF0Y2hJZCxcbiAgICAgICAgdXJsOiBzdWdnZXN0aW9uLnVybCxcbiAgICAgICAgdGl0bGU6IHN1Z2dlc3Rpb24udGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBzdWdnZXN0aW9uLmRlc2NyaXB0aW9uLFxuICAgICAgICBwbGF0Zm9ybTogc3VnZ2VzdGlvbi5wbGF0Zm9ybSxcbiAgICAgICAgc3VnZ2VzdGVkQnk6IHtcbiAgICAgICAgICBpZDogc3VnZ2VzdGlvbi51c2VyLmlkLFxuICAgICAgICAgIG5hbWU6IHN1Z2dlc3Rpb24udXNlci5uYW1lIHx8IHN1Z2dlc3Rpb24udXNlci51c2VybmFtZSB8fCAnVXRpbGlzYXRldXInLFxuICAgICAgICAgIHVzZXJuYW1lOiBzdWdnZXN0aW9uLnVzZXIudXNlcm5hbWUgfHwgJ3VzZXInXG4gICAgICAgIH0sXG4gICAgICAgIHZvdGVzOiB7XG4gICAgICAgICAgdXB2b3RlczogMCxcbiAgICAgICAgICBkb3dudm90ZXM6IDAsXG4gICAgICAgICAgdXNlclZvdGU6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZEF0OiBzdWdnZXN0aW9uLmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxuICAgICAgICBpc1ZlcmlmaWVkOiBmYWxzZVxuICAgICAgfVxuICAgIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyZXVyIGNyw6lhdGlvbiBzdWdnZXN0aW9uOicsIGVycm9yKVxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIHN1Z2dlc3Rpb24nXG4gICAgfSlcbiAgfVxufVxuXG4vLyBGb25jdGlvbnMgdXRpbGl0YWlyZXNcbmZ1bmN0aW9uIGlzVmFsaWRWaWRlb1VybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCB2YWxpZERvbWFpbnMgPSBbXG4gICAgJ3lvdXR1YmUuY29tJywgJ3lvdXR1LmJlJywgJ20ueW91dHViZS5jb20nLFxuICAgICdkYWlseW1vdGlvbi5jb20nLCAnZGFpLmx5JyxcbiAgICAndHdpdGNoLnR2JywgJ2NsaXBzLnR3aXRjaC50dicsXG4gICAgJ3ZpbWVvLmNvbScsXG4gICAgJ3N0cmVhbWFibGUuY29tJ1xuICBdXG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHVybE9iaiA9IG5ldyBVUkwodXJsKVxuICAgIHJldHVybiB2YWxpZERvbWFpbnMuc29tZShkb21haW4gPT4gdXJsT2JqLmhvc3RuYW1lLmluY2x1ZGVzKGRvbWFpbikpXG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGRldGVjdFBsYXRmb3JtKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKHVybC5pbmNsdWRlcygneW91dHViZS5jb20nKSB8fCB1cmwuaW5jbHVkZXMoJ3lvdXR1LmJlJykpIHJldHVybiAneW91dHViZSdcbiAgaWYgKHVybC5pbmNsdWRlcygnZGFpbHltb3Rpb24uY29tJykgfHwgdXJsLmluY2x1ZGVzKCdkYWkubHknKSkgcmV0dXJuICdkYWlseW1vdGlvbidcbiAgaWYgKHVybC5pbmNsdWRlcygndHdpdGNoLnR2JykpIHJldHVybiAndHdpdGNoJ1xuICBpZiAodXJsLmluY2x1ZGVzKCd2aW1lby5jb20nKSkgcmV0dXJuICd2aW1lbydcbiAgcmV0dXJuICdvdGhlcidcbn1cblxuZnVuY3Rpb24gZXh0cmFjdFRpdGxlRnJvbVVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpXG4gICAgaWYgKHVybE9iai5ob3N0bmFtZS5pbmNsdWRlcygneW91dHViZScpKSB7XG4gICAgICBjb25zdCB2aWRlb0lkID0gdXJsT2JqLnNlYXJjaFBhcmFtcy5nZXQoJ3YnKSB8fCB1cmxPYmoucGF0aG5hbWUuc3BsaXQoJy8nKS5wb3AoKVxuICAgICAgcmV0dXJuIGBWaWTDqW8gWW91VHViZSAke3ZpZGVvSWR9YFxuICAgIH1cbiAgICByZXR1cm4gYFZpZMOpbyAke3VybE9iai5ob3N0bmFtZX1gXG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiAnTm91dmVsbGUgdmlkw6lvJ1xuICB9XG59Il0sIm5hbWVzIjpbImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsInByaXNtYSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtYXRjaElkIiwicXVlcnkiLCJtZXRob2QiLCJoYW5kbGVHZXRTdWdnZXN0aW9ucyIsImhhbmRsZUNyZWF0ZVN1Z2dlc3Rpb24iLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJzZXNzaW9uIiwiY3VycmVudFVzZXJJZCIsInVzZXIiLCJpZCIsInN1Z2dlc3Rpb25zIiwidmlkZW9TdWdnZXN0aW9uIiwiZmluZE1hbnkiLCJ3aGVyZSIsImlzQmxvY2tlZCIsImluY2x1ZGUiLCJzZWxlY3QiLCJuYW1lIiwidXNlcm5hbWUiLCJpbWFnZSIsInZvdGVzIiwidXNlcklkIiwidm90ZVR5cGUiLCJyZXBvcnRzIiwiaXNSZXNvbHZlZCIsIl9jb3VudCIsIm9yZGVyQnkiLCJpc1ZlcmlmaWVkIiwiY3JlYXRlZEF0IiwiZm9ybWF0dGVkU3VnZ2VzdGlvbnMiLCJtYXAiLCJzdWdnZXN0aW9uIiwidXB2b3RlcyIsImZpbHRlciIsInYiLCJsZW5ndGgiLCJkb3dudm90ZXMiLCJ1c2VyVm90ZSIsImZpbmQiLCJ1cmwiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicGxhdGZvcm0iLCJzdWdnZXN0ZWRCeSIsInRvSVNPU3RyaW5nIiwicmVwb3J0c0NvdW50Iiwic29ydGVkU3VnZ2VzdGlvbnMiLCJzb3J0IiwiYSIsImIiLCJzY29yZUEiLCJzY29yZUIiLCJEYXRlIiwiZ2V0VGltZSIsInN1Y2Nlc3MiLCJjb25zb2xlIiwiYm9keSIsInRyaW0iLCJpc1ZhbGlkVmlkZW9VcmwiLCJtYXRjaCIsImZpbmRVbmlxdWUiLCJkZXRlY3RQbGF0Zm9ybSIsImV4aXN0aW5nIiwiZmluZEZpcnN0IiwidXNlclN1Z2dlc3Rpb25zIiwiY291bnQiLCJjcmVhdGUiLCJkYXRhIiwiZXh0cmFjdFRpdGxlRnJvbVVybCIsImxvZyIsInZhbGlkRG9tYWlucyIsInVybE9iaiIsIlVSTCIsInNvbWUiLCJkb21haW4iLCJob3N0bmFtZSIsImluY2x1ZGVzIiwidmlkZW9JZCIsInNlYXJjaFBhcmFtcyIsImdldCIsInBhdGhuYW1lIiwic3BsaXQiLCJwb3AiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/video-suggestions/[matchId].ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideo-suggestions%2F%5BmatchId%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fvideo-suggestions%2F%5BmatchId%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();